

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Xiao Zhang">
  <meta name="keywords" content="">
  
    <meta name="description" content="1. IntroductinAny ASR system can be just divided into three parts:   Acoustic Model Language Model Decoder  Kaldi has a lot of examples in its projects.There are two necessary raw materials for us to">
<meta property="og:type" content="article">
<meta property="og:title" content="Kaldi for Dummies">
<meta property="og:url" content="http://xiaos.site/2022/07/11/Kaldi-for-Dummies/index.html">
<meta property="og:site_name" content="Xiao">
<meta property="og:description" content="1. IntroductinAny ASR system can be just divided into three parts:   Acoustic Model Language Model Decoder  Kaldi has a lot of examples in its projects.There are two necessary raw materials for us to">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://xiaos.site/images/directorystructure2.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817041457234.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817042227053.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817042905667.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817233820245.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817233930142.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817233550549.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817235807016.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817235906320.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817233522660.png">
<meta property="og:image" content="http://xiaos.site/2022/07/11/images/image-20220818000139263.png">
<meta property="og:image" content="http://xiaos.site/2022/07/11/images/image-20220818000210497.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817214614445.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220818000941498.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220818001112500.png">
<meta property="og:image" content="http://xiaos.site/2022/07/11/images/image-20220817233710490.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220817231038503.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220731104820116.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220731194754537.png">
<meta property="og:image" content="http://xiaos.site/images/image-20220731211958212.png">
<meta property="article:published_time" content="2022-07-11T01:17:19.000Z">
<meta property="article:modified_time" content="2022-08-17T23:54:56.228Z">
<meta property="article:author" content="Xiao Zhang">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://xiaos.site/images/directorystructure2.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Kaldi for Dummies - Xiao</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xiaos.site","root":"/","version":"1.9.1","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Xiao&#39;s Site</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/products/">
                <i class="iconfont icon-category-fill"></i>
                Products
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/use-cases/">
                <i class="iconfont icon-tags-fill"></i>
                Use Cases
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                Links
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Kaldi for Dummies"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-07-11 09:17" pubdate>
          July 11, 2022 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          116k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          965 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Kaldi for Dummies</h1>
            
            <div class="markdown-body">
              
              <h1 id="1-Introductin"><a href="#1-Introductin" class="headerlink" title="1. Introductin"></a>1. Introductin</h1><p>Any ASR system can be just divided into three parts: </p>
<ol>
<li>Acoustic Model</li>
<li>Language Model</li>
<li>Decoder</li>
</ol>
<p>Kaldi has a lot of examples in its projects.There are two necessary raw materials for us to train the model:</p>
<ol>
<li><strong>.wav file</strong></li>
<li><strong>labelled .txt</strong></li>
</ol>
<p>We need four necessary elements in Kaldi! We call it <strong>“HCLG.fst”</strong>, we can make speech recognition from these core file. Acutally, just like we are building a map, and we just decode all the paths from there in order to get the prediction results. The underneath idea just like from the typology from the mathematics.<br>We are using Viterbi algorithm to decoding our HCLG.fst. The exact name should be token passing method, which is a kind of variant algotithm of Viterbi.</p>
<p><img src="/../images/directorystructure2.png" srcset="/img/loading.gif" lazyload alt="This Pic is from: https://www.eleanorchodroff.com/tutorial/kaldi/training-acoustic-models.html#prepare-directories"></p>
<p>​	</p>
<h2 id="1-1-Audio-Corpus"><a href="#1-1-Audio-Corpus" class="headerlink" title="1.1 Audio Corpus"></a>1.1 Audio Corpus</h2><p>In kaldi, 1 frame is 10ms. For some front work, it always like 24ms for one frame. For a workable dataset, we at least need 2000 hrs data. </p>
<h3 id="1-2-1-About-UTF-8"><a href="#1-2-1-About-UTF-8" class="headerlink" title="1.2.1 About UTF-8"></a>1.2.1 About UTF-8</h3><p>Before we really get into the world of Kaldi, we need to know the character decoding and encoding standard. So we need to know the basics of the UTF-8 &amp; Ascii. </p>
<p>As we knew there can be various languages in this world other than English, we need to make it more accesible to encode and then transmit. Different countries can have different kinds of encoding and decoding standards, this can be a big burden of the communication.Thus, people created the UTF-8 to unify the standards in all of the world, so different countries do need to worry about the discontinuity of the language communication.</p>
<p>We can just run this before head into the shell, so we can manipulate the Chinese or any other languages’ characters in Python in linux system.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-built_in">export</span> PYTHONIOENCODING=utf-8<br></code></pre></td></tr></table></figure>

<p>In UNIX, we can firstly check the file’s encoding format by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">file ../..txt<br></code></pre></td></tr></table></figure>

<p>If it is UTF-16 Little Endian or other formats, we can just convert it into UTF-8 by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">iconv -l UTF-16LE -t UTF-8 ../.../...<br></code></pre></td></tr></table></figure>

<p>Eg. there has a <strong>dir</strong> with many .txt files in UTF16 which in <em>local&#x2F;data</em>:</p>
<p>Here are the standard manipulation:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-comment"># firstly, we make a new dir and make sure put in all the manipulated data in this dir</span><br><span class="hljs-built_in">mkdir</span> <span class="hljs-built_in">local</span>/audio_data_utf8<br><br><span class="hljs-comment"># then we do a loop to put all the data in local/data to local/audio_data_utf8</span><br><br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">local</span>/data/*;<br><span class="hljs-keyword">do</span> <br>&gt; y=`<span class="hljs-built_in">echo</span> <span class="hljs-variable">$x</span> | sed <span class="hljs-string">&#x27;s|data|audio_data_utf8|&#x27;</span>`;<br><span class="hljs-comment"># &gt; echo $y      just preview the output</span><br><span class="hljs-comment"># &gt; done </span><br><span class="hljs-comment"># transform all &quot;x&quot; utf16 files into utf8</span><br>iconv -f UTF-16LE -t UTF-8 <span class="hljs-variable">$x</span> &gt; <span class="hljs-variable">$y</span>;<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure>

<p>other notes</p>
<p>The liux and windows files are not totally exchangeable, especially when we operate the .txt files on those two different kinds of machines.</p>
<p>especially we can see some codes shows the dissimilarities like: <feff>.</p>
<p>we can use dos2unix tool to do the convertion:<br>After we did wget install dos2unix, then we can just do:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">dos2unix the_file_I_want_do_conversion.txt<br></code></pre></td></tr></table></figure>



<h3 id="1-2-2-Text-washing-prepare-the-data"><a href="#1-2-2-Text-washing-prepare-the-data" class="headerlink" title="1.2.2 Text washing(prepare the data)"></a>1.2.2 Text washing(prepare the data)</h3><p>But before we launch the test, we need to firstly do the text washing.</p>
<p>We need to prpare the data and do the data cleaning from the data_path directory<br>def pre_data(data_path):</p>
<h4 id="1-2-2-1-Regular-Expression-this-is-always-the-first-step"><a href="#1-2-2-1-Regular-Expression-this-is-always-the-first-step" class="headerlink" title="1.2.2.1 Regular Expression, this is always the first step"></a>1.2.2.1 Regular Expression, this is always the first step</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">This is core processing function, we mostly use Regular Expression here.</span><br><span class="hljs-string">Here is just a sample code, that we need to deal with: abrabic numbers, if its number, then there is no need to do segment, just replace it with space one by one. </span><br><span class="hljs-string"></span><br><span class="hljs-string">input：&quot;一二三五六&quot;</span><br><span class="hljs-string">output：&quot;一 二 三 五 六&quot;</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br>```Python<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">solve_data</span>():<br>	<span class="hljs-comment"># Delete &quot;()&quot;</span><br>	<span class="hljs-comment"># detect Chinese characters(\u4e00-\u9fa5) from a-z, A-Z, 0-9, &quot;.&quot;. It will catch the sentences with those elements.</span><br>	a = re.findall(<span class="hljs-string">&#x27;[\u4e00-\u9fa5a-zA-Z0-9 .]+&#x27;</span>, data, re.S)<br>	<span class="hljs-comment">#print(&quot;&quot;.join(a))</span><br>	<span class="hljs-keyword">return</span> <span class="hljs-string">&quot; &quot;</span>.join(a)<br>	<span class="hljs-keyword">pass</span><br><br><span class="hljs-comment"># save the results into a new &quot;solve_data&quot; path</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pre_data</span>(<span class="hljs-params">data_path+<span class="hljs-string">&quot;solve_data&quot;</span></span>):<br>	data = []<br>	<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(data_path, <span class="hljs-string">&quot;w&quot;</span>, encoding=utf-<span class="hljs-number">8</span>) <span class="hljs-keyword">as</span> file:<br>		<span class="hljs-comment"># loop all the lines</span><br>		<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> data:<br>			file.writelines(<span class="hljs-built_in">str</span>(line)+<span class="hljs-string">&quot;\n&quot;</span>)<br>			<span class="hljs-keyword">pass</span><br>		<span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure>

<p>After we get our target, we need to set the processing functions.</p>
<h4 id="1-1-1-2-Replace-numbers-into-words"><a href="#1-1-1-2-Replace-numbers-into-words" class="headerlink" title="1.1.1.2 Replace numbers into words"></a>1.1.1.2 Replace numbers into words</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">replace_num</span>(<span class="hljs-params">data</span>)<br>	data.replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;dot&quot;</span>)<br>	data.replace(<span class="hljs-string">&quot;0&quot;</span>, <span class="hljs-string">&quot;zero&quot;</span>)<br>	data.replace(<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;one&quot;</span>)<br>	data.replace(<span class="hljs-string">&quot;2&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>)<br>	data.replace(<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>)<br>	<span class="hljs-comment"># .......	</span><br></code></pre></td></tr></table></figure>

<h4 id="1-1-1-3-Segment"><a href="#1-1-1-3-Segment" class="headerlink" title="1.1.1.3 Segment"></a>1.1.1.3 Segment</h4><p>We need to enterpret the text file to phones, the tools we need is lexicon, which is just like the dictionary. So in this way, we need to segement the words, and according to our prior knowledge from our dictionary, so we can invert the segmented words into the phones. This step is typically used for the language like Chinese, since for Chinese, the word’s stop is not just like we put a space there, but we need to segment it manually. For Chinese, we mostly use Jieba to segement the sentences into words. </p>
<p>Here are the preview of the results should be:<br>input：”今天是一个好日子”<br>output：”今天 是 一个 好 日子”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> jieba<br><br><span class="hljs-comment"># Claim the function for segmenting</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">segment_item</span>(<span class="hljs-params">data</span>):<br>	<span class="hljs-keyword">return</span> <span class="hljs-string">&quot; &quot;</span>.join(jieba.cut(data))<br>	<span class="hljs-keyword">pass</span><br><span class="hljs-comment"># After we set this function we can combine into the previous saving files.</span><br><span class="hljs-comment"># save the file as nosegment </span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.join(os.path.join(save_path, <span class="hljs-string">&quot;text.nosegement&quot;</span>)), <span class="hljs-string">&#x27;w&#x27;</span>, encoding = <span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>	<span class="hljs-comment"># loop all the lines and save it one by one.</span><br>	<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> text:<br>		<span class="hljs-comment"># we firstly do the segment and then save it one by one</span><br>		segmet_list = segement_item(item[<span class="hljs-number">1</span>])<br>		file.writelines(item[<span class="hljs-number">0</span>] + <span class="hljs-string">&quot; &quot;</span> + segmet_list + <span class="hljs-string">&quot;\n&quot;</span>)<br>	<span class="hljs-keyword">pass</span> <br><br></code></pre></td></tr></table></figure>

<h4 id="1-1-1-4-Combine-into-a-whole-processing-structure"><a href="#1-1-1-4-Combine-into-a-whole-processing-structure" class="headerlink" title="1.1.1.4 Combine into a whole processing structure"></a>1.1.1.4 Combine into a whole processing structure</h4><p>Now after we did the regular expression and jieba. We just combine them together. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">jieba_cut_data</span>(<span class="hljs-params">data</span>):<br><br>	data = replace_num(data)<br>	<span class="hljs-comment"># this is just for the normal case, we just need to cut the sentences</span><br>	<span class="hljs-comment"># cut the words with &quot; &quot; one space, and replace the &quot;  &quot;(two spaces) into only one space.</span><br>	data = <span class="hljs-string">&quot; &quot;</span>.join(jieba.cut(data)).replace(<span class="hljs-string">&quot;  &quot;</span>, <span class="hljs-string">&quot; &quot;</span>))<br><br><br>	<span class="hljs-comment"># these are the needs for unusual cases, which we dealt before in the RE section, we already found out the words with those elements we want to handle with. Now, it is time for us to deal with them. If there is all numbers, so we just do not split the words, like &quot;一二三四五&quot;.</span><br>	is_cut =  <span class="hljs-literal">True</span><br><br><br><br>	<span class="hljs-comment"># here if the scenario is TRUE, which means there is a element in there, if all are numbers it will become [True, True, True, True, True, ... True, True], in that case, it will be &quot;is_cut&quot; ture. Not in, is not return anymore.</span><br>	<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">	input:  这是 学习 笔记</span><br><span class="hljs-string">	output: [], which is an empty list</span><br><span class="hljs-string"></span><br><span class="hljs-string">	input:  这是一本学习笔记本卖两块</span><br><span class="hljs-string">	output: [  Ture,         True], sum this list we got 2, but not equals to the previous list length, so we do not process it.</span><br><span class="hljs-string"></span><br><span class="hljs-string">	input:  一二三四五</span><br><span class="hljs-string">	output: [Ture, Ture, Ture, Ture, True], sum this list we got 5, equals to the previous list length, so we process it.</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">	&#x27;&#x27;&#x27;</span><br><br>	<span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>（[<span class="hljs-literal">True</span> <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data <span class="hljs-keyword">if</span> item <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;零&quot;</span>], [<span class="hljs-string">&quot;壹&quot;</span>], [<span class="hljs-string">&quot;二&quot;</span>], [<span class="hljs-string">&quot;三&quot;</span>], [<span class="hljs-string">&quot;四&quot;</span>]， [<span class="hljs-string">&quot;五&quot;</span>]]）== !<span class="hljs-built_in">len</span>(data):<br>		is_cut = <span class="hljs-literal">True</span><br><br>	<span class="hljs-comment"># here if the scenario is TRUE, not all the context are numbers. we just follow the normal way, cut it with jieba, and replace the two spaces into one space.</span><br>	<span class="hljs-keyword">if</span> is_cut:<br>		data = <span class="hljs-string">&quot; &quot;</span>.join(jieba.cut(data)).replace(<span class="hljs-string">&quot;  &quot;</span>, <span class="hljs-string">&quot; &quot;</span>))<br>	<span class="hljs-keyword">else</span>：<br>	<span class="hljs-comment"># we process those context with full numbers.</span><br>	<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">	input:  一二三四五</span><br><span class="hljs-string">	output: [一 二 三 四 五]</span><br><span class="hljs-string">	&#x27;&#x27;&#x27;</span><br>		data = <span class="hljs-string">&quot; &quot;</span>.join(data)<br>	<span class="hljs-keyword">return</span> data<br><br>	<span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">data = []<br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(data_path, <span class="hljs-string">&#x27;r&#x27;</span>, encoding = <span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>	<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file.readlines():<br>		<span class="hljs-comment"># print(line.strip(&quot;\n&quot;).strip()), preview the results to delete the &#x27;\n&#x27; together with the space.</span><br>		<span class="hljs-comment"># just append the data that once processed.</span><br>		<span class="hljs-comment"># bef_data here is the before data</span><br>		bef_data = line.strip(<span class="hljs-string">&quot;\n&quot;</span>).strip()<br>		<span class="hljs-comment"># cut the sentences into words</span><br>		bef_data = <span class="hljs-string">&quot; &quot;</span>.join(jieba.cut(bef_data))<br>		<span class="hljs-comment"># here we input the bef_data, after processed in solve_data() function to get the processed data</span><br>		data.append(solve_data(bef_data))<br>	<span class="hljs-keyword">pass</span><br><span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># this is a magic function</span><br><span class="hljs-keyword">if</span> _name_== <span class="hljs-string">&#x27;_main_&#x27;</span>:<br>	data_path = <span class="hljs-string">&quot;./.../.../&quot;</span><br>	pre_data(data_path)<br><br></code></pre></td></tr></table></figure>



<h2 id="1-2-Basic-preparation"><a href="#1-2-Basic-preparation" class="headerlink" title="1.2 Basic preparation"></a>1.2 Basic preparation</h2><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">├── data<br>│   ├── train<br>│   │   ├── wav<span class="hljs-number">.</span>scp<br>│   │   ├── text<br>│   │   ├── utt2spk<br>│   │   ├── spk2utt<br>│   ├── <span class="hljs-keyword">test</span><br>|── dict<br>│   ├── lexicon<span class="hljs-number">.</span>txt<br>│   ├── extra_questions<span class="hljs-number">.</span>txt<br>│   ├── nosilence_phones<span class="hljs-number">.</span>txt<br>│   ├── silence_phones<span class="hljs-number">.</span>txt<br>|── lang<br>│   ├── L<span class="hljs-number">.</span><span class="hljs-keyword">fst</span>/L_disambig<span class="hljs-number">.</span><span class="hljs-keyword">fst</span><br>│   ├── oov<span class="hljs-number">.</span><span class="hljs-keyword">int</span>/oov<span class="hljs-number">.</span>txt<br>│   ├── phones<span class="hljs-number">.</span>txt<br>│   ├── topo<br>│   ├── words<span class="hljs-number">.</span>txt<br>│   ├── phone<br><br></code></pre></td></tr></table></figure>



<p>This can be how we prepare those files.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$stage</span> -le 1 ];<span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">local</span>/thchs-30_data_prep.sh <span class="hljs-variable">$thchs</span>/data_thchs30<br>  <span class="hljs-built_in">ln</span> -s <span class="hljs-variable">$thchs</span>/data_thchs30 data_thchs30<br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;###### Bookmark: language preparation ######&#x27;</span><br>  <span class="hljs-comment"># prepare lexicon.txt, extra_questions.txt, nonsilence_phones.txt, optional_silence.txt, silence_phones.txt</span><br>  <span class="hljs-comment"># build a large lexicon that invovles words in both the training and decoding, all in data/dict</span><br>  <span class="hljs-built_in">mkdir</span> -p data/dict;<br>  <span class="hljs-built_in">cp</span> <span class="hljs-variable">$thchs</span>/resource/dict/&#123;extra_questions.txt,nonsilence_phones.txt,optional_silence.txt,silence_phones.txt&#125; data/dict &amp;&amp; \<br>  <span class="hljs-built_in">cat</span> <span class="hljs-variable">$thchs</span>/resource/dict/lexicon.txt <span class="hljs-variable">$thchs</span>/data_thchs30/lm_word/lexicon.txt | \<br>  grep -v <span class="hljs-string">&#x27;&lt;s&gt;&#x27;</span> | grep -v <span class="hljs-string">&#x27;&lt;/s&gt;&#x27;</span> | <span class="hljs-built_in">sort</span> -u &gt; data/dict/lexicon.txt<br><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;###### Bookmark: language processing ######&#x27;</span><br>  <span class="hljs-comment"># generate language stuff used for training</span><br>  <span class="hljs-comment"># also lexicon to L_disambig.fst for graph making in local/thchs-30_decode.sh</span><br>  <span class="hljs-built_in">mkdir</span> -p data/lang;<br>  utils/prepare_lang.sh --position_dependent_phones <span class="hljs-literal">false</span> data/dict <span class="hljs-string">&quot;&lt;SPOKEN_NOISE&gt;&quot;</span> data/local/lang data/lang<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>





<h3 id="1-2-1-Step-1-Prepare-Train-Files"><a href="#1-2-1-Step-1-Prepare-Train-Files" class="headerlink" title="1.2.1 Step 1. Prepare $Train Files"></a>1.2.1 Step 1. Prepare $Train Files</h3><p>For building those four elements, we need 4 files: <strong>1. wav.scp, 2. text, 3. utt2spk, 4. spk2utt.</strong></p>
<p><img src="/../images/image-20220817041457234.png" srcset="/img/loading.gif" lazyload alt="image-20220817041457234"></p>
<h4 id="wav-scp"><a href="#wav-scp" class="headerlink" title="wav.scp"></a>wav.scp</h4><p>Here is the format of those 4 files:</p>
<ol>
<li><strong>wav.scp: [audio id] –&gt; [file directory path name]</strong></li>
</ol>
<p>Here are the <em>python</em> way:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br><span class="hljs-comment">#The location of the audio directory</span><br>target_dir = <span class="hljs-string">&#x27;./../../&#x27;</span><br>save_path = <span class="hljs-string">&#x27;./../../&#x27;</span><br><br><span class="hljs-comment"># Loop all the audio resources</span><br>wav_scp = []<br><span class="hljs-keyword">for</span> file_name <span class="hljs-keyword">in</span> os.listdir(target_dir):<br><span class="hljs-comment"># Append all the .wav file into the list</span><br>	<span class="hljs-keyword">if</span> file_name[-<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] == <span class="hljs-string">&quot;.wav&quot;</span>:<br><span class="hljs-comment"># Here we use &quot;.&quot; to split the file_name and use join to combine our directory address. We also can use &quot;os.path.join(target_dir + filename)&quot;. </span><br>		wav_scp.append([file_name.split(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>], os.path.join(target_dir, filename)])<br>		<span class="hljs-keyword">pass</span><br>	<span class="hljs-keyword">pass</span><br><span class="hljs-comment"># we can check the output by print(wav_scp)</span><br><span class="hljs-comment"># Save wav_scp</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(save_path, wav.scp), <span class="hljs-string">&#x27;w&#x27;</span>, encoding = <span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br><span class="hljs-comment"># Loop all the items in wav.scp and save them one by one	</span><br>	<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> wav.scp: <br>		file.writelines(item[<span class="hljs-number">0</span>]+<span class="hljs-string">&quot; &quot;</span>+item[<span class="hljs-number">1</span>]+<span class="hljs-string">&quot;\n&quot;</span>)   <br>		<span class="hljs-comment">#Our output format should be:  filename target_dir filename</span><br>	    <span class="hljs-keyword">pass</span><br><span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure>

<p>The last step can be sorting the file name by vim:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Unix">:sort<br></code></pre></td></tr></table></figure>

<p>The <em>UNIX</em> way:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># find all the wav_files name and their dir</span><br>find <span class="hljs-string">&#x27;./../../&#x27;</span> -iname <span class="hljs-string">&#x27;*.wav&#x27;</span> <br><span class="hljs-comment"># use find we can list all the .wav files&#x27; name, the &quot;i&quot; in &quot;-iname&quot; means not caring the upper or lower case of the characters.</span><br><br><span class="hljs-comment">#we can check it by printing the first line </span><br>find <span class="hljs-string">&#x27;./../../&#x27;</span> -iname <span class="hljs-string">&#x27;*.wav&#x27;</span> | <span class="hljs-built_in">head</span> -n 1<br><br><span class="hljs-comment"># then we can save the .wav file list into a temp place</span><br>find <span class="hljs-string">&#x27;./../../&#x27;</span> -iname <span class="hljs-string">&#x27;*.wav&#x27;</span> &gt; wav.scp.temp<br><br><span class="hljs-comment"># now we already got all the uttpath, but we still need the uttid</span><br><br><span class="hljs-built_in">cat</span> wav.scp.temp | awk - F <span class="hljs-string">&#x27;/&#x27;</span> <span class="hljs-string">&#x27;&#123;printf(&quot;%s_%s\n&quot;, $(NF-1), $NF)&#125; &#x27;</span>|sed <span class="hljs-string">&#x27;s|.wav||&#x27;</span> &gt; wav_id<br><span class="hljs-comment"># here we are using sed to remove all the &quot;.wav&quot; strings into &quot; &quot; || means &quot;&quot;, which is empty space</span><br><br><span class="hljs-comment"># we only need to combine the wav.scp.temp and wav_id, since there are all in great orders, so we can just do:</span><br><span class="hljs-comment"># preview the data: paste -d&#x27; &#x27; wav_id wav.scp.temp | head -n 1</span><br><span class="hljs-built_in">paste</span> -d<span class="hljs-string">&#x27; &#x27;</span> wav_id wav.scp.temp &gt; wav.scp<br><span class="hljs-comment"># now we can get all the wav.scp</span><br><br><br><br><br></code></pre></td></tr></table></figure>

<h4 id="Text"><a href="#Text" class="headerlink" title="Text"></a><strong>Text</strong></h4><ol start="2">
<li><strong>text:    audio id –&gt; labelled file</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">From AUDIOSPK1001.txt get ID and &quot;I Love Kaldi&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">AUDIOSPK1001 I Love Kaldi</span><br><span class="hljs-string">AUDIOSPK1002 Me too</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>target_dir = <span class="hljs-string">&quot;./.../.../&quot;</span><br><span class="hljs-comment"># This is the stored text file</span><br><br>save_path = <span class="hljs-string">&quot;./.../.../&quot;</span><br>text = []<br><br><br><span class="hljs-comment"># loop all the text file name in directory</span><br><span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> os.listdir(target_dir):<br>	<span class="hljs-comment"># only operate the file that ends with &quot;.txt&quot;</span><br>	<span class="hljs-keyword">if</span> filename[-<span class="hljs-number">4</span>:] != <span class="hljs-string">&quot;.txt&quot;</span>:<br>		<span class="hljs-keyword">continue</span><br><br>	<span class="hljs-comment"># read the file</span><br>	<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(target_dir, filename), <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>)<span class="hljs-keyword">as</span> file:<br>		<span class="hljs-comment"># read line by line </span><br>		<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file.readlines():<br>			<span class="hljs-comment"># Delete all &quot;\n&quot; and the the space</span><br>			line = line.strip(<span class="hljs-string">&quot;\n&quot;</span>).strip()<br>			<span class="hljs-comment"># print(line.strip(&quot;\n&quot;)), we can print the text files all in one screen without the \n symbols.</span><br><br>			<span class="hljs-comment"># Get the filename with its contents</span><br>			text.append([filename.split(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>], line])<br><br>			<span class="hljs-keyword">pass</span><br>		<span class="hljs-keyword">pass</span><br>	<span class="hljs-keyword">pass</span><br><br><br><span class="hljs-comment"># save the file as nosegment </span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.join(os.path.join(save_path, <span class="hljs-string">&quot;text.nosegement&quot;</span>)), <span class="hljs-string">&#x27;w&#x27;</span>, encoding = <span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>	<span class="hljs-comment"># loop all the lines and save it one by one.</span><br>	<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> text:<br>		file.writelines(item[<span class="hljs-number">0</span>] + <span class="hljs-string">&quot; &quot;</span> + item[<span class="hljs-number">1</span>] + <span class="hljs-string">&quot;\n&quot;</span>)<br>	<span class="hljs-keyword">pass</span> <br><br><br><span class="hljs-built_in">print</span>(text)<br></code></pre></td></tr></table></figure>



<p>At the same time, here are the <em><strong>UNIX</strong></em> way:</p>
<p>we need to get the format like SPK_ID WAV_PATH</p>
<p><strong>#AUDIOSPK1001 I Love Kaldi</strong><br><strong>#AUDIOSPK1002 Me too</strong></p>
<p>Here we just create a .sh file called <em>generate_text_id.sh</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-meta">#! /bin/bash</span><br>spk_id = <span class="hljs-variable">$1</span>  <span class="hljs-comment">#$1 is your first variable</span><br><br><span class="hljs-built_in">exit</span> 0;<br><br></code></pre></td></tr></table></figure>

<p>Then we need to make it into a runable file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-built_in">chmod</span> +x generate_text_id.sh <br></code></pre></td></tr></table></figure>

<p>And then we can run it again:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Bash">./generate_text_id.sh SPK.txt<br><span class="hljs-comment"># it will just print itself</span><br>SPK.txt<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#! /bin/bash</span><br>spk_id = <span class="hljs-variable">$1</span>  <span class="hljs-comment">#$1 is your first variable</span><br><br><span class="hljs-comment"># echo spk_id, this will just print the first column</span><br>awk &#123;<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s %s\n&quot;</span>, <span class="hljs-variable">$spk_id</span>, <span class="hljs-variable">$1</span>)&#125;<span class="hljs-string">&#x27; $spk_id</span><br><span class="hljs-string"></span><br><span class="hljs-string">exit 0;</span><br></code></pre></td></tr></table></figure>

<h4 id="utt2spk-audio-id-–-gt-SPK-id"><a href="#utt2spk-audio-id-–-gt-SPK-id" class="headerlink" title="utt2spk: audio id –&gt; SPK id"></a><strong>utt2spk: audio id –&gt; SPK id</strong></h4><h4 id="spk2utt-SPK-–-gt-audio-id"><a href="#spk2utt-SPK-–-gt-audio-id" class="headerlink" title="spk2utt: SPK      –&gt; audio id"></a><strong>spk2utt: SPK      –&gt; audio id</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">import</span> os<br><span class="hljs-comment"># The path of the audio resources</span><br>path_dir = <span class="hljs-string">&quot;./.../.../&quot;</span><br><br><br><span class="hljs-comment"># The final output path</span><br>save_path = <span class="hljs-string">&quot;./.../.../&quot;</span><br><br><br><br><span class="hljs-comment"># Save the final results</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">save_data</span>(<span class="hljs-params">data, file_name</span>):<br>	<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(target_file, file_name), <span class="hljs-string">&#x27;w&#x27;</span>, encoding = <span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>		<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:<br>			<span class="hljs-comment"># save the item line in line</span><br>			file.writelines(item)<br>			<span class="hljs-keyword">pass</span><br>		<span class="hljs-keyword">pass</span><br>	<span class="hljs-keyword">pass</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">Audio file name: AUDIOSPK1001.wav</span><br><span class="hljs-string"></span><br><span class="hljs-string">	AUDIOSPK1001 SPK1</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_utt2spk</span>():<br>	<span class="hljs-comment"># For saving the final results</span><br>	utt2spk = [] <br>	<span class="hljs-comment"># loop all the directories</span><br>	<span class="hljs-keyword">for</span> file_name <span class="hljs-keyword">in</span> os.listdir(path_dir):<br>		<span class="hljs-comment"># if the file itself is .wav file, we operate, others dismiss</span><br>		<span class="hljs-keyword">if</span> file_name[-<span class="hljs-number">4</span>:] == <span class="hljs-string">&quot;.wav&quot;</span>:<br><br><br>		<span class="hljs-comment"># Audio ID</span><br>		utt = file_name.split(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>]<br>		<span class="hljs-comment"># SPK ID</span><br>		spk = utt[-<span class="hljs-number">7</span>:-<span class="hljs-number">5</span>]<br><br>		<span class="hljs-comment"># Print(utt+ &quot; &quot; + spk + &quot;\n&quot;)</span><br>		<span class="hljs-comment"># Add into utt2spk</span><br>		utt2spk.append(utt + <span class="hljs-string">&quot; &quot;</span> + spk + <span class="hljs-string">&quot;\n&quot;</span>)<br>		<span class="hljs-keyword">pass</span><br>	<span class="hljs-keyword">pass</span><br><span class="hljs-comment"># save the data</span><br>save_data(utt2spk, <span class="hljs-string">&quot;utt2spk&quot;</span>)<br><br><br><br><span class="hljs-comment"># set the function to get spk2utt</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">Audio file name: AUDIOSPK1001.wav</span><br><span class="hljs-string"></span><br><span class="hljs-string">	SPK1 AUDIOSPK1001 AUDIOSPK1002</span><br><span class="hljs-string">	SPK2 AUDIOSPK2001 AUDIOSPK2001</span><br><span class="hljs-string">	......</span><br><span class="hljs-string">dict&#123;</span><br><span class="hljs-string">	&quot;SPK1&quot; : [AUDIOSPK1001, AUDIOSPK1002],</span><br><span class="hljs-string">	&quot;SPK2&quot; : [AUDIOSPK2001, AUDIOSPK2002],</span><br><span class="hljs-string">	......</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_spk2utt</span>():<br>	spk2utt = &#123;&#125;<br>	<span class="hljs-keyword">for</span> file_name <span class="hljs-keyword">in</span> os.listdir(path_dir):<br>		<span class="hljs-comment"># Delete a file</span><br>		<span class="hljs-keyword">if</span> file_name[-<span class="hljs-number">4</span>:<span class="hljs-number">0</span>] == <span class="hljs-string">&quot;.txt&quot;</span>:<br>			<span class="hljs-keyword">continue</span><br>		<span class="hljs-comment"># audio ID</span><br>		utt = file_name.split(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>]<br>		<span class="hljs-comment"># SPK ID</span><br>		spk = utt[-<span class="hljs-number">7</span>:-<span class="hljs-number">5</span>]<br><br><br>		<span class="hljs-comment"># If there has a SPK here, we just append</span><br>		<span class="hljs-keyword">if</span> spk <span class="hljs-keyword">in</span> spk2utt:<br>			spk2utt[spk].append(utt)<br>		<span class="hljs-comment"># If there not have a SPK here, we just preset it as a list. </span><br>		<span class="hljs-keyword">else</span>:<br>			spk2utt[spk] = []<br>		<span class="hljs-keyword">pass</span><br><br>		<span class="hljs-comment"># using print(spk2utt) to check</span><br><br>		<span class="hljs-comment"># final output list from the dict</span><br>		write_spk2utt = []<br>		<span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> spk2utt.keys():<br>			write_spk2utt.append(<span class="hljs-built_in">str</span>(key)+<span class="hljs-string">&quot; &quot;</span>.join(spk2utt(key))+<span class="hljs-string">&quot;\n&quot;</span>)<br>			<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">				list = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;]</span><br><span class="hljs-string">				print(&quot; &quot;.join(list))</span><br><span class="hljs-string">			------------------------------------------------------</span><br><span class="hljs-string">				A B C D</span><br><span class="hljs-string">			&#x27;&#x27;&#x27;</span><br>			<span class="hljs-keyword">pass</span><br>		<span class="hljs-comment"># save the output</span><br>		save_data(write_spk2utt, <span class="hljs-string">&quot;spk2utt&quot;</span>)<br>	<span class="hljs-keyword">pass</span><br><br><br><br>get_spk2utt()<br>get_utt2spk()<br><br><br><br><br><br></code></pre></td></tr></table></figure>



<p>The difference between the utt2spk and the spk2utt is that, for utt2spk, there is only one-to-one relations instead of like spk2utt, there are one-to-multiple relation. So, in most cases, we only need either 3 or 4, because if we already got one, another one is also can be derived.</p>
<h3 id="1-2-2-Step-2-Prepare-Dict-x2F-Dictionary"><a href="#1-2-2-Step-2-Prepare-Dict-x2F-Dictionary" class="headerlink" title="1.2.2 Step 2. Prepare $Dict&#x2F;Dictionary"></a>1.2.2 Step 2. Prepare $Dict&#x2F;Dictionary</h3><p>Dictionary this is the<code> dict</code> file we need to manipulate, in <code>dict</code> directory. The <code> dict</code>  folder can contain these files that we needed:</p>
<p><img src="/../images/image-20220817042227053.png" srcset="/img/loading.gif" lazyload alt="image-20220817042227053"></p>
<p><strong>$dict</strong> includes:</p>
<h4 id="lexicon-txt-word-–-gt-phones"><a href="#lexicon-txt-word-–-gt-phones" class="headerlink" title="lexicon.txt : word –&gt; phones"></a>lexicon.txt : word –&gt; phones</h4><p>We need to get the <strong>lexicon.txt</strong> by running  get_lexicon.py. </p>
<p>We need two kinds of dictionaries.<br>1st. the lexicon.txt from the corpus to better train a n-gram model, in some words, the language model.<br>2st. the word-to-phones, we also need a reference lists from there, we need acoustic model. In this case, so we need a “BIG” dictionary.</p>
<p>In this step, we need to transform the words into phones, so we can align the words and train them.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python">	<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">	This is the dictionary mostly for the acoustic training needs.</span><br><span class="hljs-string">	去年  q v4 n ian2</span><br><span class="hljs-string">	上去  sh ang4 q v4</span><br><span class="hljs-string">	上去  sh ang4 q v5</span><br><span class="hljs-string"></span><br><span class="hljs-string">	&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_lexicon</span>(<span class="hljs-params">data_path</span>):<br><br>	<span class="hljs-comment"># set can reduce the duplications. The dictionary must be just a set. </span><br>	lexicon = <span class="hljs-built_in">set</span>()<br>	<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;data_path&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>, encoding = <span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>		<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file.readlines():<br>			<span class="hljs-comment">#print(line.strip(&quot;\n&quot;).strip().split(&quot; &quot;)), remove the \n and cut with the identifier from the SPACE &quot; &quot;</span><br>			[lexicon.add(item) <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> line.strip(<span class="hljs-string">&quot;\n&quot;</span>).strip().split(<span class="hljs-string">&quot; &quot;</span>)]<br>	<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">				input:  这是一本学习笔记本卖两块</span><br><span class="hljs-string">				output: [这是，一本， 学习， 笔记本， 卖， 两块],</span><br><span class="hljs-string">	&#x27;&#x27;&#x27;</span><br><br><br>			<span class="hljs-keyword">pass</span><br>		<span class="hljs-keyword">pass</span><br>		<span class="hljs-comment">#print(lexicon)</span><br>		<span class="hljs-comment"># save the lexicon</span><br>		<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;../.../lexicon.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>, encoding = <span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> file:<br>			<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lexicon:<br>				file.writelines(item + <span class="hljs-string">&quot;\n&quot;</span>)<br>		<span class="hljs-comment"># here are the estimated results.</span><br>		<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">		去年 </span><br><span class="hljs-string">		上去  </span><br><span class="hljs-string">		上去  </span><br><span class="hljs-string">		一</span><br><span class="hljs-string">		笔记本</span><br><span class="hljs-string">		卖</span><br><span class="hljs-string">		&#x27;&#x27;&#x27;</span><br>				<span class="hljs-keyword">pass</span><br>			<span class="hljs-keyword">pass</span><br>	<span class="hljs-keyword">pass</span><br><br>get_lexicon(<span class="hljs-string">&quot;./.../temp&quot;</span>)<br><br></code></pre></td></tr></table></figure>




<h4 id="phone-txt-x2F-nonsilence-phones-txt-all-the-phones"><a href="#phone-txt-x2F-nonsilence-phones-txt-all-the-phones" class="headerlink" title="phone.txt&#x2F;nonsilence_phones.txt : all the phones"></a><strong>phone.txt&#x2F;nonsilence_phones.txt : all the phones</strong></h4><h4 id="silence-phones-txt-SIL"><a href="#silence-phones-txt-SIL" class="headerlink" title="silence_phones.txt : SIL"></a>silence_phones.txt : SIL</h4><h4 id="extra-questions-txt"><a href="#extra-questions-txt" class="headerlink" title="extra_questions.txt"></a>extra_questions.txt</h4><p><img src="/../images/image-20220817042905667.png" srcset="/img/loading.gif" lazyload alt="image-20220817042905667"></p>
<p>The meaning of the extra_questions.txt is to distinguistise the same pronunication with difference tones. This is very important for some tonal languages like Mandarin or Thai…</p>
<p>Finally we can get the ID to words.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"></span><br><span class="hljs-string">ID    [word1, word2, word3, ..., wordn]</span><br><span class="hljs-string">[&#x27;UDIOSPK1001SEN01&#x27;, &#x27;I, Love, Kaldi&#x27;]</span><br><span class="hljs-string">[&#x27;UDIOSPK1001SEN02&#x27;, &#x27;Me, too&#x27;]</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">id2words</span>(<span class="hljs-params">data_path</span>):<br><br>	<span class="hljs-keyword">for</span> file_name <span class="hljs-keyword">in</span> os.listdir(data_path):<br>		<span class="hljs-keyword">if</span> fiel_name[-<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] == <span class="hljs-string">&quot;txt&quot;</span>:<br>			<span class="hljs-keyword">continue</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">...........</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br></code></pre></td></tr></table></figure>

<h3 id="1-2-3-Step-3-Prepare-lang"><a href="#1-2-3-Step-3-Prepare-lang" class="headerlink" title="1.2.3 Step 3. Prepare $lang"></a>1.2.3 Step 3. Prepare $lang</h3><p>The <code>lang</code> file is generated from the <code>dict</code>. </p>
<h4 id="L-fst-x2F-L-disambig-fst"><a href="#L-fst-x2F-L-disambig-fst" class="headerlink" title="L.fst&#x2F;L_disambig.fst"></a>L.fst&#x2F;L_disambig.fst</h4><p>Here is the preview of the <code>L.fst</code>. </p>
<p><img src="/../images/image-20220817233820245.png" srcset="/img/loading.gif" lazyload alt="image-20220817233820245"></p>
<p><img src="/../images/image-20220817233930142.png" srcset="/img/loading.gif" lazyload alt="image-20220817233930142"></p>
<h4 id="oov-int-x2F-oov-txt"><a href="#oov-int-x2F-oov-txt" class="headerlink" title="oov.int&#x2F;oov.txt"></a>oov.int&#x2F;oov.txt</h4><p>OOv means out of vocabulary, it deals with the words that not in the recognition dictionary. </p>
<h4 id="phones-txt"><a href="#phones-txt" class="headerlink" title="phones.txt"></a>phones.txt</h4><p>Phone.txt gives every phone a number.</p>
<p><img src="/../images/image-20220817233550549.png" srcset="/img/loading.gif" lazyload alt="image-20220817233550549"></p>
<h4 id="topo"><a href="#topo" class="headerlink" title="topo"></a>topo</h4><p>topo means a hidden markov network.</p>
<p><img src="/../images/image-20220817235807016.png" srcset="/img/loading.gif" lazyload alt="image-20220817235807016"></p>
<p><img src="/../images/image-20220817235906320.png" srcset="/img/loading.gif" lazyload alt="image-20220817235906320"></p>
<h4 id="words-txt"><a href="#words-txt" class="headerlink" title="words.txt"></a>words.txt</h4><p>Words.txt will give each word a number.</p>
<p><img src="/../images/image-20220817233522660.png" srcset="/img/loading.gif" lazyload alt="image-20220817233522660"></p>
<h4 id="phone"><a href="#phone" class="headerlink" title="phone"></a>phone</h4><p>Phone is a directory, it will help the decision tree to get the clusters. </p>
<h2 id="1-4-Acoustic-Feature-Extractions"><a href="#1-4-Acoustic-Feature-Extractions" class="headerlink" title="1.4 Acoustic Feature Extractions"></a>1.4 Acoustic Feature Extractions</h2><p>We can have the MFCC feature as well as the Fbank feature. MFCC is in 13D, and Fbank is 40D. </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$stage</span> -le 2 ];<span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;###### Bookmark: feature extraction ######&#x27;</span><br>  <span class="hljs-comment"># produce MFCC and Fbank features in data/&#123;mfcc,fbank&#125;/&#123;train,test&#125;</span><br>  <span class="hljs-built_in">rm</span> -rf data/mfcc &amp;&amp; <span class="hljs-built_in">mkdir</span> -p data/mfcc &amp;&amp; <span class="hljs-built_in">cp</span> -r data/&#123;train,<span class="hljs-built_in">test</span>&#125; data/mfcc<br>  <span class="hljs-built_in">rm</span> -rf data/fbank &amp;&amp; <span class="hljs-built_in">mkdir</span> -p data/fbank &amp;&amp; <span class="hljs-built_in">cp</span> -r data/&#123;train,<span class="hljs-built_in">test</span>&#125; data/fbank<br>  <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> train <span class="hljs-built_in">test</span>; <span class="hljs-keyword">do</span><br>    <span class="hljs-comment"># make mfcc and fbank</span><br>    steps/make_mfcc.sh --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> data/mfcc/<span class="hljs-variable">$x</span><br>    steps/make_fbank.sh --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> data/fbank/<span class="hljs-variable">$x</span><br>    <span class="hljs-comment"># compute cmvn</span><br>    steps/compute_cmvn_stats.sh data/mfcc/<span class="hljs-variable">$x</span><br>    steps/compute_cmvn_stats.sh data/fbank/<span class="hljs-variable">$x</span><br>  <span class="hljs-keyword">done</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>







<img src="../images/image-20220818000139263.png" srcset="/img/loading.gif" lazyload alt="image-20220818000139263" style="zoom:80%;" />





<img src="../images/image-20220818000210497.png" srcset="/img/loading.gif" lazyload alt="image-20220818000210497" style="zoom:80%;" />

<h2 id="1-5-GMM-Trainning"><a href="#1-5-GMM-Trainning" class="headerlink" title="1.5 GMM Trainning"></a>1.5 GMM Trainning</h2><p>Here we will do the GMM-HMM traninings.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$stage</span> -le 3 ];<span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;###### Bookmark: GMM-HMM training ######&#x27;</span><br>  <span class="hljs-comment"># monophone</span><br>  <span class="hljs-comment"># we will train the monophone here.</span><br>  steps/train_mono.sh --boost-silence 1.25 --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> data/mfcc/train data/lang exp/mono<br>  <span class="hljs-comment"># monophone ali</span><br>  <span class="hljs-comment"># we will align the monophone to train a GMM-HMM model once again</span><br>  steps/align_si.sh --boost-silence 1.25 --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> data/mfcc/train data/lang exp/mono exp/mono_ali<br>  <br>  <span class="hljs-comment"># the 1.25 here is the default param for setting the silent phone.</span><br><br>  <span class="hljs-comment"># triphone</span><br>  <span class="hljs-comment"># we will train the monophone here</span><br>  steps/train_deltas.sh --boost-silence 1.25 --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> 2000 10000 data/mfcc/train data/lang exp/mono_ali exp/tri1<br>  <span class="hljs-comment"># triphone_ali</span><br>  <span class="hljs-comment"># we will align the triphone to train a GMM-HMM model once again</span><br>  steps/align_si.sh --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> data/mfcc/train data/lang exp/tri1 exp/tri1_ali<br><br>  <span class="hljs-comment"># lda_mllt</span><br>  <span class="hljs-comment"># we will use the lda_mllt model to do the trainning</span><br>  steps/train_lda_mllt.sh --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> --splice-opts <span class="hljs-string">&quot;--left-context=3 --right-context=3&quot;</span> 2500 15000 data/mfcc/train data/lang exp/tri1_ali exp/tri2b<br>  <span class="hljs-comment"># lda_mllt_ali</span><br>  <span class="hljs-comment"># realign and retrain</span><br>  steps/align_si.sh  --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> --use-graphs <span class="hljs-literal">true</span> data/mfcc/train data/lang exp/tri2b exp/tri2b_ali<br><br>  <span class="hljs-comment"># sat</span><br>  steps/train_sat.sh --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> 2500 15000 data/mfcc/train data/lang exp/tri2b_ali exp/tri3b<br>  <span class="hljs-comment"># sat_ali</span><br>  steps/align_fmllr.sh --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> data/mfcc/train data/lang exp/tri3b exp/tri3b_ali<br><br>  <span class="hljs-comment"># quick</span><br>  steps/train_quick.sh --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> 4200 40000 data/mfcc/train data/lang exp/tri3b_ali exp/tri4b<br>  <span class="hljs-comment"># quick_ali</span><br>  steps/align_fmllr.sh --nj <span class="hljs-variable">$n</span> --cmd <span class="hljs-string">&quot;<span class="hljs-variable">$train_cmd</span>&quot;</span> data/mfcc/train data/lang exp/tri4b exp/tri4b_ali<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>









<h2 id="1-6-Install-Kaldi"><a href="#1-6-Install-Kaldi" class="headerlink" title="1.6 Install Kaldi"></a>1.6 Install Kaldi</h2><p><a target="_blank" rel="noopener" href="https://www.eleanorchodroff.com/tutorial/kaldi/installation.html">https://www.eleanorchodroff.com/tutorial/kaldi/installation.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.assemblyai.com/blog/kaldi-speech-recognition-for-beginners-a-simple-tutorial/">https://www.assemblyai.com/blog/kaldi-speech-recognition-for-beginners-a-simple-tutorial/</a></p>
<p>Automatic Installation</p>
<h1 id="2-“The-Big-Four”"><a href="#2-“The-Big-Four”" class="headerlink" title="2. “The Big Four”"></a>2. “The Big Four”</h1><p><img src="/../images/image-20220817214614445.png" srcset="/img/loading.gif" lazyload alt="image-20220817214614445"></p>
<p>From the last chapter we already knew HCLG.fst includes H.fst, C.fst, L.fst, G.fs. </p>
<p>Here are the flowchart: from acoustic characteristics —&gt; phones —&gt; words —&gt; sentences.</p>
<p><strong>H.fst enables us to input the acoustics characteritics and return the phone.</strong></p>
<p><strong>L.fst enables us to input phones to word.</strong></p>
<p>How to get those four files can be the core idea of the kaldi ASR system. The ASR detection logic can be: acoustic features –&gt; H.fst –&gt; phones C.fst –&gt; L.fst + G.fst (linguistics) –&gt; words.</p>
<p>​					</p>
<h2 id="2-1-H-fst"><a href="#2-1-H-fst" class="headerlink" title="2.1 H.fst"></a>2.1 H.fst</h2><p>For H.fst, what we want is input the acoustic characteristics, output phones.</p>
<h3 id="2-1-1-Make-MFCC"><a href="#2-1-1-Make-MFCC" class="headerlink" title="2.1.1 Make MFCC"></a>2.1.1 Make MFCC</h3><p>After we run this script below, the Kalid will automatically generate 7 files:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">steps/make_mfcc.sh --nj 1 --mfcc-config=/root/data/kaldi_file/<br></code></pre></td></tr></table></figure>

<ol>
<li>conf: default param</li>
<li>data: the MFCC output, just like feats.scp</li>
<li>feats.scp  </li>
<li>frame_shift</li>
<li>log：some log files generated</li>
<li>utt2dur</li>
<li>utt2num_frames</li>
</ol>
<h4 id="2-1-1-1-feats-scp"><a href="#2-1-1-1-feats-scp" class="headerlink" title="2.1.1.1 feats.scp"></a>2.1.1.1 feats.scp</h4><p>The format of it can be like:</p>
<p><em>AUDIO_FILE_ID    Location_Directory_of_the_MFCC_Generated_in_AWK</em></p>
<p>The significance of this file is to tell us where the MFCC will be stored. All the MFCC features will be stored at AWK formats. AWK is binary forms, because it will save the space. </p>
<p>This is the preview of 13th MFCC: </p>
<p>AUDIO_ID</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dns">[<span class="hljs-number">54.32323</span> -<span class="hljs-number">12</span>.<span class="hljs-number">8887</span> -<span class="hljs-number">2.12212</span>  <span class="hljs-number">3</span>.<span class="hljs-number">2322</span> ... -<span class="hljs-number">2.323232</span>  #<span class="hljs-number">13</span>th features for each frame<br><br><span class="hljs-number">4.323323</span> -<span class="hljs-number">11</span>.<span class="hljs-number">5887</span> -<span class="hljs-number">3.12312</span>   <span class="hljs-number">8</span>.<span class="hljs-number">2422</span> ... -<span class="hljs-number">4.323239</span><br><br><span class="hljs-number">5.332324</span> -<span class="hljs-number">10</span>.<span class="hljs-number">8877</span> -<span class="hljs-number">6.442212</span>  <span class="hljs-number">3</span>.<span class="hljs-number">2322</span> ... -<span class="hljs-number">7.223132</span> ]<br></code></pre></td></tr></table></figure>

<h4 id="2-1-1-2-frame-shift"><a href="#2-1-1-2-frame-shift" class="headerlink" title="2.1.1.2 frame_shift"></a>2.1.1.2 frame_shift</h4><p>The frame shift is just a param told us the frame shift time, if it is 10ms, then it will print 0.01, since 10ms &#x3D; 0.01s.</p>
<h4 id="2-1-1-3-utt2dur"><a href="#2-1-1-3-utt2dur" class="headerlink" title="2.1.1.3 utt2dur"></a>2.1.1.3 utt2dur</h4><p>This will show us every audio files’ durations.</p>
<p><em>AUDIO_FILE_ID      #Durations (s)</em></p>
<h4 id="2-1-1-4-utt2num-frames"><a href="#2-1-1-4-utt2num-frames" class="headerlink" title="2.1.1.4 utt2num_frames"></a>2.1.1.4 utt2num_frames</h4><p>This will told us every audio files’ frame numbers. Since we already know frame_shift time is 0.01s. Which means for every frame it needs 0.01s.</p>
<p><em>AUDIO_FILE_ID      #Number of frames</em></p>
<h4 id="2-1-5-Visualize-ark-file"><a href="#2-1-5-Visualize-ark-file" class="headerlink" title="2.1.5 Visualize ark file"></a>2.1.5 Visualize ark file</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">copy-feats ark:cmvn_kaldi_file.ark ark, t:cmvn_feat.ark.txt<br></code></pre></td></tr></table></figure>

<p>Here is how we visualize the ark file into the txt. After that we can preview the cmvn_ark.txt file.</p>
<p><img src="/../images/image-20220818000941498.png" srcset="/img/loading.gif" lazyload alt="image-20220818000941498"></p>
<h3 id="2-1-2-CMVN"><a href="#2-1-2-CMVN" class="headerlink" title="2.1.2 CMVN"></a>2.1.2 CMVN</h3><p>This operation is for solving one problem which is that we need to take into the different people’s diversities. Since we knew that for different people have different timbre. CMVN is for solving this problem.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">egs/wsj/steps/compute_cmvn_stats.sh &lt;data_dir&gt;<br></code></pre></td></tr></table></figure>

<p>The following is where the CMVN tool belongs to. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">steps/compute_cmvn_stats.sh ./kaldi_file<br></code></pre></td></tr></table></figure>

<p>Here we generated the CMVN in the kaldi_file directory. </p>
<p>After we visualized the .ark file from the kaidi_file directory to preview the .txt file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">copy-feats ark:cmvn_kaldi_file.ark ark, t:cmvn_feat.ark.txt<br></code></pre></td></tr></table></figure>

<p>We can know that for each frame, there have 13DMFCC params, so if we need to do CMVN, we need to caculate 2 params for each frame. So there will be every column has two params: average and variation. So there had 13 columns, so for each column we need 13*2 &#x3D; 26 CMVN params, which consists 13 averg and 13 var.</p>
<p>If we do not caring about the SPK, just focus on the audio content itslelf will be a big issue. Since as we know, we do need know the spk’s voice characteristics and this will affect our trainings,we need to take that bias into it. We will do “CMVN” here, this will be applied for prior distribution for male and female. The value between the “CMVN” is [0-1]. </p>
<h3 id="2-1-3-Generate-H-fst"><a href="#2-1-3-Generate-H-fst" class="headerlink" title="2.1.3 Generate H.fst"></a>2.1.3 Generate H.fst</h3><p> After we got CMVN, we already can generate the H.fst file. </p>
<h3 id="2-1-4-Check-Log"><a href="#2-1-4-Check-Log" class="headerlink" title="2.1.4 Check Log"></a>2.1.4 Check Log</h3><p><img src="/../images/image-20220818001112500.png" srcset="/img/loading.gif" lazyload alt="image-20220818001112500"></p>
<h2 id="2-2-L-fst-Dictionary"><a href="#2-2-L-fst-Dictionary" class="headerlink" title="2.2 L.fst (Dictionary)"></a>2.2 L.fst (Dictionary)</h2><p>We input phones and output words. </p>
<p>Generate run.sh &amp; get L.fst</p>
<p>The final step should be write a run.sh file to generate the L.fst file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-comment"># 1. generate the L.fst</span><br><br><span class="hljs-comment"># here we used prepare_lang.sh </span><br><span class="hljs-comment"># there are four params we input: </span><br><br><span class="hljs-comment">#	1. the four files we prepared, fix_data_dir.sh ./local/dict</span><br><span class="hljs-comment">#   2. If there has the phones not in the dictionary, what it will be recognized as &#x27;SIL&#x27;</span><br><span class="hljs-comment">#   3. the temp files</span><br><span class="hljs-comment">#   4. F.fst</span><br><br><br>utils/prepare_lang.sh ./local/dict <span class="hljs-string">&#x27;SIL&#x27;</span> ./temp/01/ L/lang<br><br><br><br><br></code></pre></td></tr></table></figure>

<h3 id="Visualize-the-L-fst-file"><a href="#Visualize-the-L-fst-file" class="headerlink" title="Visualize the L.fst file"></a>Visualize the L.fst file</h3><p>we can print the .fst here to see the whole results.</p>
<img src="../images/image-20220817233710490.png" srcset="/img/loading.gif" lazyload alt="image-20220817233710490" style="zoom:80%;" />

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">fstprint ../lang/L.fst<br></code></pre></td></tr></table></figure>

<p>Or we can just check the first 20th results:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">fstprint ../lang/L.fst | <span class="hljs-built_in">head</span> -n 20<br></code></pre></td></tr></table></figure>

<p>Save the log of the L.fst into L.txt.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">fstprint ../lang/L.fst &gt; L.txt<br></code></pre></td></tr></table></figure>

<p>After we generated the L.fst, we can get the estimation from there. All the phones and words will get an ID. </p>
<p>  phone_ID   word_ID     input: phone    output: word    probabilities<br>    0           1        	<eps>    		<eps>   	  0.6878887788<br>    1           2        	EY1_S      		  A           0.7987897897<br>  …..<br>Here are the .fst format: </p>
<p>We can use fstdraw to draw the decoding graph.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">fstdraw --isymbols=../lang/phones.txt --osymbols=../lang/words.txt ../lang/L.fst  &gt; L.dot<br></code></pre></td></tr></table></figure>

<p>We can firstly output a L.dot file then we can just draw it. So we can use .dot file to generate it into a jpg file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Bash">apt wget install ghostscript<br>apt wget install graphviz<br>dot -Tjpg L.dot &gt; L.jpg<br></code></pre></td></tr></table></figure>

<h2 id="2-3-C-fst-（Context）"><a href="#2-3-C-fst-（Context）" class="headerlink" title="2.3. C.fst （Context）"></a>2.3. C.fst （Context）</h2><p>In here, means the phones can be affected by the phones next to it</p>
<p>Input phones and output phones. </p>
<h2 id="2-4-G-fst-just-n-gram-get-lm-sh-Language-Model"><a href="#2-4-G-fst-just-n-gram-get-lm-sh-Language-Model" class="headerlink" title="2.4 G.fst : just n-gram  get_lm.sh (Language Model)"></a>2.4 G.fst : just n-gram  get_lm.sh (Language Model)</h2><p>we can download srilm. </p>
<p>Language model is very easy, we just need to prepare the corpus line by line and make sure cutted the sentences.</p>
<p>G.fst actually is G.fsa, fsa is a very typical kind of fst, it is a kind of reciever, which inputs equals to output.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># the name can be set as: text.lm</span><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string"></span><br><span class="hljs-string">[word1, word2, word3, ..., wordn]</span><br><span class="hljs-string">[&#x27;I, Love, Kaldi&#x27;]</span><br><span class="hljs-string">[&#x27;Me, too&#x27;]</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br></code></pre></td></tr></table></figure>

<p>Here we just introduce UNIX way to do it. We will use awk. </p>
<p>Awk is very fast then python, if there is efficiency needs.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-comment"># get the corpus input we need to process </span><br>file_name = <span class="hljs-string">&#x27;/root/data/.../...&#x27;</span> <br><br><span class="hljs-comment"># read the file</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_name, <span class="hljs-string">&#x27;r&#x27;</span>, encoding = <span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>	<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> file.readlines():<br>		<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot; &quot;</span>.join(item.strip(<span class="hljs-string">&quot;\n&quot;</span>)strip().split(<span class="hljs-string">&quot; &quot;</span>)[<span class="hljs-number">1</span>:]))<br>		<span class="hljs-keyword">pass</span><br>	<span class="hljs-keyword">pass</span><br><br><br><br><span class="hljs-comment"># we can just get [word1, word2, word3, ..., wordn]</span><br></code></pre></td></tr></table></figure>

<p>We will use the AWK to do the same thing.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-comment"># here are the original idea</span><br><span class="hljs-comment">#[AUDIOSPK1001 &#x27;I, Love, Kaldi&#x27;]</span><br><span class="hljs-comment">#[AUDIOSPK1001 &#x27;Me, too&#x27;]</span><br><span class="hljs-comment"># we can just firstly test it with print in awk</span><br>awk <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span> text <span class="hljs-comment"># here &quot;text&quot; means the txt file you want to manipulate, her is $1 means we print the first colum. It will look like:</span><br><span class="hljs-comment"># AUDIOSPK1001</span><br><span class="hljs-comment"># AUDIOSPK1002</span><br><br><span class="hljs-comment"># If is $0, which means the whole. $2 means the second column. $4 is the fourth column.</span><br></code></pre></td></tr></table></figure>


<p>Here we need to get the column that except the first column.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Bash">awk <span class="hljs-string">&#x27;&#123;for(i=2; i&lt;NF; i++) printf $i &quot;\t&quot;; printf &#x27;</span>\n<span class="hljs-string">&#x27;&#125;&#x27;</span> text <span class="hljs-comment"># here the \t is just like \n,  we can delete it as well. the default diving symbol is &#x27; &#x27;, in here actually awk -F &#x27; &#x27;&#x27;&#123;for(i=2; i&lt;NF; i++) printf $i &quot;\t&quot;; printf &#x27;\n&#x27;&#125;&#x27; text. NF is the last column, awk is based on column manipulations. </span><br><br>awk <span class="hljs-string">&#x27;&#123;for(i=2; i&lt;NF; i++) printf $i &quot;&quot;; printf &#x27;</span>\n<span class="hljs-string">&#x27;&#125;&#x27;</span> text<br><span class="hljs-comment"># we will get exactly the same output just like python, but much faster:</span><br><span class="hljs-comment"># word1, word2, word3, ..., wordn</span><br><span class="hljs-comment"># I, Love, Kaldi</span><br><span class="hljs-comment"># Me, too</span><br></code></pre></td></tr></table></figure>

<h3 id="2-4-1-write-get-lm-sh-we-need-to-write-aw-shell-script-to-run-and-get-th-lm-language-model"><a href="#2-4-1-write-get-lm-sh-we-need-to-write-aw-shell-script-to-run-and-get-th-lm-language-model" class="headerlink" title="2.4.1 write get_lm.sh (we need to write aw shell script to run and get th lm(language model))"></a>2.4.1 write get_lm.sh (we need to write aw shell script to run and get th lm(language model))</h3><p>n-gram language model is statistical language model, more traning data can be more “better” in some ways. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-comment"># You need firstly specify your corpus sources.</span><br>text = <span class="hljs-string">&quot;./text.lm&quot;</span><br><span class="hljs-comment"># 1. get all the corpus</span><br><span class="hljs-comment"># awk &#x27;&#123;for(i=2; i&lt;NF; i++) printf $i &quot;&quot;; printf &#x27;\n&#x27;&#125;&#x27; text &gt; xxx.lm</span><br><span class="hljs-comment"># loop all the columns:</span><br><span class="hljs-comment">#	NF here means the last column</span><br><span class="hljs-comment">#   printf just like C language, they are the same in some ways</span><br><span class="hljs-comment"># 2. Deploy Trigram n-gram model</span><br>ngram-count -text text.lm -order 3 write train.part.txt.count  <br><span class="hljs-comment"># OR we can use</span><br>ngram-count -text <span class="hljs-variable">$text</span> -order 3 write train.part.txt.count  <br><span class="hljs-comment"># $text means the file itself, we already defined it at first.</span><br><span class="hljs-comment"># -text: the corpus</span><br><span class="hljs-comment"># wirte: write the file</span><br><span class="hljs-comment"># here 3 means tri, which indicates triphone, and write into train.part.txt.count file.</span><br><span class="hljs-comment"># here are the preview</span><br><br><span class="hljs-comment">#   word  pairs         times</span><br><span class="hljs-comment">#      I                  10</span><br><span class="hljs-comment">#    I  Love              5</span><br><span class="hljs-comment">#  I  Love Kaldi          1</span><br><span class="hljs-comment">#  Hello World &lt;/s&gt;       2</span><br><span class="hljs-comment">#  &lt;/s&gt; is great          1</span><br><span class="hljs-comment"># &lt;/s&gt; means the starting or ending point, usually means something will begin or end from there.  </span><br><br><span class="hljs-comment"># 3. From the 2nd step,  generateing the lm</span><br>ngram-count -<span class="hljs-built_in">read</span> train.part.txt.count -order 3 -lm LM -interpole -kndiscount<br><span class="hljs-comment">#  -lm which means the generated Language Model, right now we call it LM</span><br><span class="hljs-comment"># -interpole is the smoothing function, and kndiscount is the callback function.There are two possibilities, one is the original and other which is callback function.</span><br><span class="hljs-comment">#  \data\</span><br><span class="hljs-comment"># ngram 1 = 2821      , here means there are 2821 1grams&#x27; pairs</span><br><span class="hljs-comment"># ngram 2 = 6344</span><br><span class="hljs-comment"># ngram 3 = 444</span><br><span class="hljs-comment"># \1-grams:</span><br><span class="hljs-comment"># -3.4234324     1       -0.034523532 this is also probabities but with log(), we call backoff method</span><br><span class="hljs-comment"># -3.4234224     2       -0.032323532</span><br><span class="hljs-comment"># -2.3234224     A       -0.023233532</span><br><span class="hljs-comment"># \2-grams:</span><br><span class="hljs-comment"># -3.2424432     I  Love          -0.232312332</span><br><span class="hljs-comment"># \3-grams:</span><br><span class="hljs-comment"># -4.3244343     I  Love Kaldi    -0.454554545</span><br><br></code></pre></td></tr></table></figure>

<h3 id="2-4-2-Generate-G-fst"><a href="#2-4-2-Generate-G-fst" class="headerlink" title="2.4.2 Generate G.fst"></a>2.4.2 Generate G.fst</h3><p>There has two ways to generate <strong>G.fst</strong>.</p>
<p>Way1: Just Call from the Kaldi shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">utils/format_lm_sri.sh data/lang /lm/LM /data/local/dict/lexicon.txt/data/lang_test<br></code></pre></td></tr></table></figure>

<p>Way2: using <strong>arpa2fst</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">arpa2fst --disambig-symbol=<span class="hljs-comment">#0 --read-symbol-table=/data/lang/words.txt /lm/LM/G.fst</span><br></code></pre></td></tr></table></figure>

<h1 id="3-Decode"><a href="#3-Decode" class="headerlink" title="3. Decode"></a>3. Decode</h1><h1 id="4-A-Very-Short-Demo"><a href="#4-A-Very-Short-Demo" class="headerlink" title="4. A Very Short Demo"></a>4. A Very Short Demo</h1><p>In this part we will download and train a complete kaldi ASR demo from installation to decoding. Since the installation of kaldi is too big and also there has a lot of submodules we do not really need. So in this case, we just do some file modifications, we just make a mini-version in order to better understand the kalidi workflow and study.</p>
<p>Firstly, we need to download the kaldi demo from the git:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs git">git clone https://github.com/xiao11lam/kaldi_tutorials.git<br>cd kaldi_tutorials<br># change the write and read privilege<br>chmod -R 755  ./*<br></code></pre></td></tr></table></figure>

<p>Here is a <code>repo</code> only for the tutorial purposes, since we have manipulated some files from the original Kaldi in order to make the installation and training process more friendly.</p>
<p><strong>And remember before you start to make this demo, please make sure you already have the cuda installed!!!.</strong></p>
<p>We highly suggesting you use the kaldi installation shell scripts written from the <code>AssemblyAI</code> <a target="_blank" rel="noopener" href="https://www.assemblyai.com/blog/kaldi-install-for-dummies/">https://www.assemblyai.com/blog/kaldi-install-for-dummies/</a></p>
<p>Please follow the instructions step by steps.</p>
<p><img src="/../images/image-20220817231038503.png" srcset="/img/loading.gif" lazyload alt="image-20220817231038503"></p>
<h2 id="1-Set-the-Tools-Environment"><a href="#1-Set-the-Tools-Environment" class="headerlink" title="1. Set the Tools Environment"></a>1. Set the Tools Environment</h2><p>Check the CPU info, to find out how many processors your PC have.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">grep <span class="hljs-string">&#x27;processor&#x27;</span> /proc/cpuinfo | <span class="hljs-built_in">sort</span> -u | <span class="hljs-built_in">wc</span> -l<br></code></pre></td></tr></table></figure>

<p><img src="/../images/image-20220731104820116.png" srcset="/img/loading.gif" lazyload alt="image-20220731104820116"></p>
<p>Now I got <code>8</code>.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> /mnt/c/Users/ABC/Desktop/kaldi-cslt/tools<br>vim run.sh  <span class="hljs-comment"># check the env installation scripts</span><br>sh run.sh <span class="hljs-comment"># we can just run the scripts and let it automatically install</span><br></code></pre></td></tr></table></figure>

<p>Here are the preview of the <code>run.sh</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># here you can spefify your CPU info</span><br>make -j 8<br><span class="hljs-comment"># install the IRSTLM</span><br>./extras/install_irstlm.sh<br><span class="hljs-comment"># install the openblas</span><br>./extras/install_openblas.sh<br></code></pre></td></tr></table></figure>



<h2 id="2-Set-the-Src-Environment"><a href="#2-Set-the-Src-Environment" class="headerlink" title="2. Set the Src Environment"></a>2. Set the Src Environment</h2><p>Here, we follow the same way to install these <code>src</code> environments.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> /mnt/c/Users/ABC/Desktop/kaldi-cslt/src<br>vim run.sh  <span class="hljs-comment"># modify the run.sh file if you want (optional)</span><br>sh run.sh<br></code></pre></td></tr></table></figure>

<p>Here are the preview of the <code>run.sh</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">./configure --static \<br>      --use-cuda=<span class="hljs-built_in">yes</span> --cudatk-dir=/usr/local/cuda \<br>      --mathlib=OPENBLAS --openblas-root=../tools/OpenBLAS/install \<br>      --static-math=<span class="hljs-built_in">yes</span> \<br>      --static-fst=<span class="hljs-built_in">yes</span> --fst-root=../tools/openfst<br><br>make depend -j 40<br><br>make -j 40<br></code></pre></td></tr></table></figure>



<h2 id="3-Prepare-for-the-Acoustic-Model-AM"><a href="#3-Prepare-for-the-Acoustic-Model-AM" class="headerlink" title="3. Prepare for the Acoustic Model (AM)"></a>3. Prepare for the Acoustic Model (AM)</h2><p>Finally, we will get into the <code>egs</code> dir to firstly train an acoustic model.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> /kaldi_tutorials/egs/thchs30<br>vim run_am.sh<br>sh run_am.sh  <span class="hljs-comment"># start to train the AM</span><br></code></pre></td></tr></table></figure>

<p>Here we need to change the path into the our local database directory:</p>
<p><img src="/../images/image-20220731194754537.png" srcset="/img/loading.gif" lazyload alt="image-20220731194754537"></p>
<p><img src="/../images/image-20220731211958212.png" srcset="/img/loading.gif" lazyload alt="image-20220731211958212"></p>
<h2 id="4-Prepare-for-the-Language-Model-LM"><a href="#4-Prepare-for-the-Language-Model-LM" class="headerlink" title="4. Prepare for the Language Model (LM)"></a>4. Prepare for the Language Model (LM)</h2><p>This is the <code>run_lm.sh</code> file. </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">dir</span>=exp/lm<br>lm_dir=<br>gmm_mdl_dir=exp/tri4b<br>nn_mdl_dir=exp/chain-skip/tdnn-f-cn<br><br><span class="hljs-built_in">mkdir</span> <span class="hljs-variable">$dir</span><br>tar czvf <span class="hljs-variable">$dir</span>/corpus.lm_e-7.tar.gz  data_thchs30/lm_word/word.3gram.lm<br><br>./utils/format_lm.sh  data/lang <span class="hljs-variable">$dir</span>/corpus.lm_e-7.tar.gz  data/lang <span class="hljs-variable">$dir</span>/lang_test<br><br>./utils/mkgraph.sh   <span class="hljs-variable">$dir</span>/lang_test <span class="hljs-variable">$gmm_mdl_dir</span>  <span class="hljs-variable">$gmm_mdl_dir</span>/graph<br><br>./utils/mkgraph.sh  --self-loop-scale 1.0 <span class="hljs-variable">$dir</span>/lang_test <span class="hljs-variable">$nn_mdl_dir</span>  <span class="hljs-variable">$nn_mdl_dir</span>/graph<br></code></pre></td></tr></table></figure>





<h2 id="5-Decode"><a href="#5-Decode" class="headerlink" title="5. Decode"></a>5. Decode</h2><p>We will use the <code>./decode_chain.sh</code>, it will print the WER. </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/bash</span><br><br>. ./path.sh<br>. ./cmd.sh<br>exp_dir=exp/chain-skip/tdnn-f-cn<br>beam=13<br>stage=-3<br><span class="hljs-keyword">for</span> data_set <span class="hljs-keyword">in</span> <span class="hljs-built_in">test</span>  ;<span class="hljs-keyword">do</span><br>      steps/nnet3/decode.sh \<br>      --nj 8 --acwt 1.0 --post-decode-acwt 10.0 \<br>      --cmd <span class="hljs-string">&quot;run.pl&quot;</span> --iter final \<br>      --stage <span class="hljs-variable">$stage</span> \<br>      <span class="hljs-variable">$exp_dir</span>/graph  data/fbank/<span class="hljs-variable">$data_set</span> <span class="hljs-variable">$exp_dir</span>/decode_graph_final<br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">cat</span> <span class="hljs-variable">$exp_dir</span>/decode_graph_final/scoring_kaldi/best_wer<br><br><span class="hljs-comment">#result: %WER 21.75 [ 17647 / 81139, 149 ins, 664 del, 16834 sub ] exp/chain-skip/tdnn-f-cn/decode_graph_final/wer_10_0.0</span><br></code></pre></td></tr></table></figure>







<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><br></code></pre></td></tr></table></figure>











<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs sh">data_thchs30/lm_word/word.3gram.lm<br>Converting <span class="hljs-string">&#x27;exp/lm/corpus.lm_e-7.tar.gz&#x27;</span> to FST<br>arpa2fst --disambig-symbol=<span class="hljs-comment">#0 --read-symbol-table=exp/lm/lang_test/words.txt - exp/lm/lang_test/G.fst</span><br>LOG (arpa2fst[5.5.10~40-6d54]:Read():arpa-file-parser.cc:94) Reading \data\ section.<br>LOG (arpa2fst[5.5.10~40-6d54]:Read():arpa-file-parser.cc:149) Reading \1-grams: section.<br>LOG (arpa2fst[5.5.10~40-6d54]:Read():arpa-file-parser.cc:149) Reading \2-grams: section.<br>LOG (arpa2fst[5.5.10~40-6d54]:Read():arpa-file-parser.cc:149) Reading \3-grams: section.<br>LOG (arpa2fst[5.5.10~40-6d54]:RemoveRedundantStates():arpa-lm-compiler.cc:359) Reduced num-states from 3076353 to 454251<br>fstisstochastic exp/lm/lang_test/G.fst<br>-7.27093e-08 -0.832396<br>awk: warning: <span class="hljs-built_in">command</span> line argument `-<span class="hljs-string">&#x27; is a directory: skipped</span><br><span class="hljs-string">Succeeded in formatting LM: &#x27;</span>exp/lm/corpus.lm_e-7.tar.gz<span class="hljs-string">&#x27;</span><br><span class="hljs-string">tree-info exp/tri4b/tree</span><br><span class="hljs-string">tree-info exp/tri4b/tree</span><br><span class="hljs-string">fstminimizeencoded</span><br><span class="hljs-string">fstpushspecial</span><br><span class="hljs-string">fsttablecompose exp/lm/lang_test/L_disambig.fst exp/lm/lang_test/G.fst</span><br><span class="hljs-string">fstdeterminizestar --use-log=true</span><br><span class="hljs-string">fstisstochastic exp/lm/lang_test/tmp/LG.fst</span><br><span class="hljs-string">-0.0480882 -0.0488869</span><br><span class="hljs-string">[info]: LG not stochastic.</span><br><span class="hljs-string">fstcomposecontext --context-size=3 --central-position=1 --read-disambig-syms=exp/lm/lang_test/phones/disambig.int --write-disambig-syms=exp/lm/lang_test/tmp/disambig_ilabels_3_1.int exp/lm/lang_test/tmp/ilabels_3_1.31779 exp/lm/lang_test/tmp/LG.fst</span><br><span class="hljs-string">fstisstochastic exp/lm/lang_test/tmp/CLG_3_1.fst</span><br><span class="hljs-string">0 -0.0488869</span><br><span class="hljs-string">[info]: CLG not stochastic.</span><br><span class="hljs-string">make-h-transducer --disambig-syms-out=exp/tri4b/graph/disambig_tid.int --transition-scale=1.0 exp/lm/lang_test/tmp/ilabels_3_1 exp/tri4b/tree exp/tri4b/final.mdl</span><br><span class="hljs-string">fstdeterminizestar --use-log=true</span><br><span class="hljs-string">fsttablecompose exp/tri4b/graph/Ha.fst exp/lm/lang_test/tmp/CLG_3_1.fst</span><br><span class="hljs-string">fstminimizeencoded</span><br><span class="hljs-string">fstrmsymbols exp/tri4b/graph/disambig_tid.int</span><br><span class="hljs-string">fstrmepslocal</span><br><span class="hljs-string">fstisstochastic exp/tri4b/graph/HCLGa.fst</span><br><span class="hljs-string">0.644531 -0.128947</span><br><span class="hljs-string">HCLGa is not stochastic</span><br><span class="hljs-string">add-self-loops --self-loop-scale=0.1 --reorder=true exp/tri4b/final.mdl exp/tri4b/graph/HCLGa.fst</span><br><span class="hljs-string">mkgraph.sh: expected exp/chain-skip/tdnn-f-cn/final.mdl to exist</span><br></code></pre></td></tr></table></figure>





<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">###### Bookmark: basic preparation ######</span><br>creating data/&#123;train,<span class="hljs-built_in">test</span>&#125;, ignore dev <span class="hljs-built_in">set</span><br>cleaning data/train<br>preparing scps and text <span class="hljs-keyword">in</span> data/train<br>cleaning data/test<br>preparing scps and text <span class="hljs-keyword">in</span> data/test<br><span class="hljs-comment">###### Bookmark: language preparation ######</span><br><span class="hljs-comment">###### Bookmark: language processing ######</span><br>utils/prepare_lang.sh --position_dependent_phones <span class="hljs-literal">false</span> data/dict &lt;SPOKEN_NOISE&gt; data/local/lang data/lang<br>Checking data/dict/silence_phones.txt ...<br>--&gt; reading data/dict/silence_phones.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/silence_phones.txt is OK<br><br>Checking data/dict/optional_silence.txt ...<br>--&gt; reading data/dict/optional_silence.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/optional_silence.txt is OK<br><br>Checking data/dict/nonsilence_phones.txt ...<br>--&gt; reading data/dict/nonsilence_phones.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/nonsilence_phones.txt is OK<br><br>Checking disjoint: silence_phones.txt, nonsilence_phones.txt<br>--&gt; disjoint property is OK.<br><br>Checking data/dict/lexicon.txt<br>--&gt; reading data/dict/lexicon.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/lexicon.txt is OK<br><br>Checking data/dict/extra_questions.txt ...<br>--&gt; reading data/dict/extra_questions.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/extra_questions.txt is OK<br>--&gt; SUCCESS [validating dictionary directory data/dict]<br><br>**Creating data/dict/lexiconp.txt from data/dict/lexicon.txt<br>fstaddselfloops data/lang/phones/wdisambig_phones.int data/lang/phones/wdisambig_words.int<br>prepare_lang.sh: validating output directory<br>utils/validate_lang.pl data/lang<br>Checking existence of separator file<br>separator file data/lang/subword_separator.txt is empty or does not exist, deal <span class="hljs-keyword">in</span> word <span class="hljs-keyword">case</span>.<br>Checking data/lang/phones.txt ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/lang/phones.txt is OK<br><br>Checking words.txt: <span class="hljs-comment">#0 ...</span><br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/lang/words.txt is OK<br><br>Checking disjoint: silence.txt, nonsilence.txt, disambig.txt ...<br>--&gt; silence.txt and nonsilence.txt are disjoint<br>--&gt; silence.txt and disambig.txt are disjoint<br>--&gt; disambig.txt and nonsilence.txt are disjoint<br>--&gt; disjoint property is OK<br><br>Checking sumation: silence.txt, nonsilence.txt, disambig.txt ...<br>--&gt; found no unexplainable phones <span class="hljs-keyword">in</span> phones.txt<br><br>Checking data/lang/phones/context_indep.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/context_indep.txt<br>--&gt; data/lang/phones/context_indep.int corresponds to data/lang/phones/context_indep.txt<br>--&gt; data/lang/phones/context_indep.csl corresponds to data/lang/phones/context_indep.txt<br>--&gt; data/lang/phones/context_indep.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/nonsilence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 217 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/nonsilence.txt<br>--&gt; data/lang/phones/nonsilence.int corresponds to data/lang/phones/nonsilence.txt<br>--&gt; data/lang/phones/nonsilence.csl corresponds to data/lang/phones/nonsilence.txt<br>--&gt; data/lang/phones/nonsilence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/silence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/silence.txt<br>--&gt; data/lang/phones/silence.int corresponds to data/lang/phones/silence.txt<br>--&gt; data/lang/phones/silence.csl corresponds to data/lang/phones/silence.txt<br>--&gt; data/lang/phones/silence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/optional_silence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.int corresponds to data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.csl corresponds to data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/disambig.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 57 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/disambig.txt<br>--&gt; data/lang/phones/disambig.int corresponds to data/lang/phones/disambig.txt<br>--&gt; data/lang/phones/disambig.csl corresponds to data/lang/phones/disambig.txt<br>--&gt; data/lang/phones/disambig.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/roots.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 218 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/roots.txt<br>--&gt; data/lang/phones/roots.int corresponds to data/lang/phones/roots.txt<br>--&gt; data/lang/phones/roots.&#123;txt, int&#125; are OK<br><br>Checking data/lang/phones/sets.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 218 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/sets.txt<br>--&gt; data/lang/phones/sets.int corresponds to data/lang/phones/sets.txt<br>--&gt; data/lang/phones/sets.&#123;txt, int&#125; are OK<br><br>Checking data/lang/phones/extra_questions.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 7 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/extra_questions.txt<br>--&gt; data/lang/phones/extra_questions.int corresponds to data/lang/phones/extra_questions.txt<br>--&gt; data/lang/phones/extra_questions.&#123;txt, int&#125; are OK<br><br>Checking optional_silence.txt ...<br>--&gt; reading data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.txt is OK<br><br>Checking disambiguation symbols: <span class="hljs-comment">#0 and #1</span><br>--&gt; data/lang/phones/disambig.txt has <span class="hljs-string">&quot;#0&quot;</span> and <span class="hljs-string">&quot;#1&quot;</span><br>--&gt; data/lang/phones/disambig.txt is OK<br><br>Checking topo ...<br><br>Checking word-level disambiguation symbols...<br>--&gt; data/lang/phones/wdisambig.txt exists (newer prepare_lang.sh)<br>Checking data/lang/oov.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/oov.txt<br>--&gt; data/lang/oov.int corresponds to data/lang/oov.txt<br>--&gt; data/lang/oov.&#123;txt, int&#125; are OK<br><br>--&gt; data/lang/L.fst is olabel sorted<br>--&gt; data/lang/L_disambig.fst is olabel sorted<br>--&gt; SUCCESS [validating lang directory data/lang]<br><span class="hljs-comment">###### Bookmark: feature extraction ######</span><br>steps/make_mfcc.sh --nj 10 --cmd run.pl data/mfcc/train<br>utils/validate_data_dir.sh: Successfully validated data-directory data/mfcc/train<br>steps/make_mfcc.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.<br>steps/make_mfcc.sh: Succeeded creating MFCC features <span class="hljs-keyword">for</span> train<br>steps/make_fbank.sh --nj 10 --cmd run.pl data/fbank/train<br>utils/validate_data_dir.sh: Successfully validated data-directory data/fbank/train<br>steps/make_fbank.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.<br>steps/make_fbank.sh: Succeeded creating filterbank features <span class="hljs-keyword">for</span> train<br>steps/compute_cmvn_stats.sh data/mfcc/train<br>Succeeded creating CMVN stats <span class="hljs-keyword">for</span> train<br>steps/compute_cmvn_stats.sh data/fbank/train<br>Succeeded creating CMVN stats <span class="hljs-keyword">for</span> train<br>steps/make_mfcc.sh --nj 10 --cmd run.pl data/mfcc/test<br>utils/validate_data_dir.sh: Successfully validated data-directory data/mfcc/test<br>steps/make_mfcc.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.<br>steps/make_mfcc.sh: Succeeded creating MFCC features <span class="hljs-keyword">for</span> <span class="hljs-built_in">test</span><br>steps/make_fbank.sh --nj 10 --cmd run.pl data/fbank/test<br>utils/validate_data_dir.sh: Successfully validated data-directory data/fbank/test<br>steps/make_fbank.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.<br>steps/make_fbank.sh: Succeeded creating filterbank features <span class="hljs-keyword">for</span> <span class="hljs-built_in">test</span><br>steps/compute_cmvn_stats.sh data/mfcc/test<br>Succeeded creating CMVN stats <span class="hljs-keyword">for</span> <span class="hljs-built_in">test</span><br>steps/compute_cmvn_stats.sh data/fbank/test<br>Succeeded creating CMVN stats <span class="hljs-keyword">for</span> <span class="hljs-built_in">test</span><br><span class="hljs-comment">###### Bookmark: GMM-HMM training ######</span><br>steps/train_mono.sh --boost-silence 1.25 --nj 10 --cmd run.pl data/mfcc/train data/lang exp/mono<br>steps/train_mono.sh: Initializing monophone system.<br>steps/train_mono.sh: Compiling training graphs<br>steps/train_mono.sh: Aligning data equally (pass 0)<br>steps/train_mono.sh: Pass 1<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 2<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 3<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 4<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 5<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 6<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 7<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 8<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 9<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 10<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 11<br>steps/train_mono.sh: Pass 12<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 13<br>steps/train_mono.sh: Pass 14<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 15<br>steps/train_mono.sh: Pass 16<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 17<br>steps/train_mono.sh: Pass 18<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 19<br>steps/train_mono.sh: Pass 20<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 21<br>steps/train_mono.sh: Pass 22<br>steps/train_mono.sh: Pass 23<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 24<br>steps/train_mono.sh: Pass 25<br>steps/train_mono.sh: Pass 26<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 27<br>steps/train_mono.sh: Pass 28<br>steps/train_mono.sh: Pass 29<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 30<br>steps/train_mono.sh: Pass 31<br>steps/train_mono.sh: Pass 32<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 33<br>steps/train_mono.sh: Pass 34<br>steps/train_mono.sh: Pass 35<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 36<br>steps/train_mono.sh: Pass 37<br>steps/train_mono.sh: Pass 38<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 39<br>steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/mono<br>steps/diagnostic/analyze_alignments.sh: see stats <span class="hljs-keyword">in</span> exp/mono/log/analyze_alignments.log<br>56 warnings <span class="hljs-keyword">in</span> exp/mono/log/acc.*.*.<span class="hljs-built_in">log</span><br>1051 warnings <span class="hljs-keyword">in</span> exp/mono/log/update.*.<span class="hljs-built_in">log</span><br>3966 warnings <span class="hljs-keyword">in</span> exp/mono/log/align.*.*.<span class="hljs-built_in">log</span><br>exp/mono: nj=10 align prob=-100.11 over 25.49h [retry=0.2%, fail=0.0%] states=656 gauss=990<br>steps/train_mono.sh: Done training monophone system <span class="hljs-keyword">in</span> exp/mono<br>steps/align_si.sh --boost-silence 1.25 --nj 10 --cmd run.pl data/mfcc/train data/lang exp/mono exp/mono_ali<br>steps/align_si.sh: feature <span class="hljs-built_in">type</span> is delta<br>steps/align_si.sh: aligning data <span class="hljs-keyword">in</span> data/mfcc/train using model from exp/mono, putting alignments <span class="hljs-keyword">in</span> exp/mono_ali<br>steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/mono_ali<br>steps/diagnostic/analyze_alignments.sh: see stats <span class="hljs-keyword">in</span> exp/mono_ali/log/analyze_alignments.log<br>steps/align_si.sh: <span class="hljs-keyword">done</span> aligning data.<br>steps/train_deltas.sh --boost-silence 1.25 --cmd run.pl 2000 10000 data/mfcc/train data/lang exp/mono_ali exp/tri1<br>steps/train_deltas.sh: accumulating tree stats<br>steps/train_deltas.sh: getting questions <span class="hljs-keyword">for</span> tree-building, via clustering<br>steps/train_deltas.sh: building the tree<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 109 with no stats; corresponding phone list: 110<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 121 with no stats; corresponding phone list: 122<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 163 with no stats; corresponding phone list: 164<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 175 with no stats; corresponding phone list: 176<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 176 with no stats; corresponding phone list: 177<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 177 with no stats; corresponding phone list: 178<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 182 with no stats; corresponding phone list: 183<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 203 with no stats; corresponding phone list: 204<br>WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 208 with no stats; corresponding phone list: 209<br>** The warnings above about <span class="hljs-string">&#x27;no stats&#x27;</span> generally mean you have phones **<br>** (or <span class="hljs-built_in">groups</span> of phones) <span class="hljs-keyword">in</span> your phone <span class="hljs-built_in">set</span> that had no corresponding data. **<br>** You should probably figure out whether something went wrong, **<br>** or whether your data just doesn<span class="hljs-string">&#x27;t happen to have examples of those **</span><br><span class="hljs-string">** phones. **</span><br><span class="hljs-string">steps/train_deltas.sh: converting alignments from exp/mono_ali to use current tree</span><br><span class="hljs-string">steps/train_deltas.sh: compiling graphs of transcripts</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 1</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 2</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 3</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 4</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 5</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 6</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 7</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 8</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 9</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 10</span><br><span class="hljs-string">steps/train_deltas.sh: aligning data</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 11</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 12</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 13</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 14</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 15</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 16</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 17</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 18</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 19</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 20</span><br><span class="hljs-string">steps/train_deltas.sh: aligning data</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 21</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 22</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 23</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 24</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 25</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 26</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 27</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 28</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 29</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 30</span><br><span class="hljs-string">steps/train_deltas.sh: aligning data</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 31</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 32</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 33</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 34</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri1</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri1/log/analyze_alignments.log</span><br><span class="hljs-string">84 warnings in exp/tri1/log/acc.*.*.log</span><br><span class="hljs-string">76 warnings in exp/tri1/log/align.*.*.log</span><br><span class="hljs-string">1 warnings in exp/tri1/log/build_tree.log</span><br><span class="hljs-string">9 warnings in exp/tri1/log/questions.log</span><br><span class="hljs-string">306 warnings in exp/tri1/log/update.*.log</span><br><span class="hljs-string">9 warnings in exp/tri1/log/init_model.log</span><br><span class="hljs-string">1 warnings in exp/tri1/log/compile_questions.log</span><br><span class="hljs-string">exp/tri1: nj=10 align prob=-96.74 over 25.48h [retry=0.3%, fail=0.0%] states=1656 gauss=10026 tree-impr=4.76</span><br><span class="hljs-string">steps/train_deltas.sh: Done training system with delta+delta-delta features in exp/tri1</span><br><span class="hljs-string">steps/align_si.sh --nj 10 --cmd run.pl data/mfcc/train data/lang exp/tri1 exp/tri1_ali</span><br><span class="hljs-string">steps/align_si.sh: feature type is delta</span><br><span class="hljs-string">steps/align_si.sh: aligning data in data/mfcc/train using model from exp/tri1, putting alignments in exp/tri1_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri1_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri1_ali/log/analyze_alignments.log</span><br><span class="hljs-string">steps/align_si.sh: done aligning data.</span><br><span class="hljs-string">steps/train_lda_mllt.sh --cmd run.pl --splice-opts --left-context=3 --right-context=3 2500 15000 data/mfcc/train data/lang exp/tri1_ali exp/tri2b</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Accumulating LDA statistics.</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Accumulating tree stats</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Getting questions for tree clustering.</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Building the tree</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Initializing the model</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 109 with no stats; corresponding phone list: 110</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 121 with no stats; corresponding phone list: 122</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 163 with no stats; corresponding phone list: 164</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 175 with no stats; corresponding phone list: 176</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 176 with no stats; corresponding phone list: 177</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 203 with no stats; corresponding phone list: 204</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 208 with no stats; corresponding phone list: 209</span><br><span class="hljs-string">This is a bad warning.</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Converting alignments from exp/tri1_ali to use current tree</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Compiling graphs of transcripts</span><br><span class="hljs-string">Training pass 1</span><br><span class="hljs-string">Training pass 2</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 3</span><br><span class="hljs-string">Training pass 4</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 5</span><br><span class="hljs-string">Training pass 6</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 7</span><br><span class="hljs-string">Training pass 8</span><br><span class="hljs-string">Training pass 9</span><br><span class="hljs-string">Training pass 10</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Training pass 11</span><br><span class="hljs-string">Training pass 12</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 13</span><br><span class="hljs-string">Training pass 14</span><br><span class="hljs-string">Training pass 15</span><br><span class="hljs-string">Training pass 16</span><br><span class="hljs-string">Training pass 17</span><br><span class="hljs-string">Training pass 18</span><br><span class="hljs-string">Training pass 19</span><br><span class="hljs-string">Training pass 20</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Training pass 21</span><br><span class="hljs-string">Training pass 22</span><br><span class="hljs-string">Training pass 23</span><br><span class="hljs-string">Training pass 24</span><br><span class="hljs-string">Training pass 25</span><br><span class="hljs-string">Training pass 26</span><br><span class="hljs-string">Training pass 27</span><br><span class="hljs-string">Training pass 28</span><br><span class="hljs-string">Training pass 29</span><br><span class="hljs-string">Training pass 30</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Training pass 31</span><br><span class="hljs-string">Training pass 32</span><br><span class="hljs-string">Training pass 33</span><br><span class="hljs-string">Training pass 34</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri2b</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri2b/log/analyze_alignments.log</span><br><span class="hljs-string">3 warnings in exp/tri2b/log/lda_acc.*.log</span><br><span class="hljs-string">1 warnings in exp/tri2b/log/compile_questions.log</span><br><span class="hljs-string">1 warnings in exp/tri2b/log/build_tree.log</span><br><span class="hljs-string">306 warnings in exp/tri2b/log/update.*.log</span><br><span class="hljs-string">102 warnings in exp/tri2b/log/acc.*.*.log</span><br><span class="hljs-string">165 warnings in exp/tri2b/log/align.*.*.log</span><br><span class="hljs-string">7 warnings in exp/tri2b/log/questions.log</span><br><span class="hljs-string">9 warnings in exp/tri2b/log/init_model.log</span><br><span class="hljs-string">exp/tri2b: nj=10 align prob=-48.25 over 25.48h [retry=0.5%, fail=0.0%] states=2072 gauss=15036 tree-impr=4.30 lda-sum=23.93 mllt:impr,logdet=1.20,1.72</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Done training system with LDA+MLLT features in exp/tri2b</span><br><span class="hljs-string">steps/align_si.sh --nj 10 --cmd run.pl --use-graphs true data/mfcc/train data/lang exp/tri2b exp/tri2b_ali</span><br><span class="hljs-string">steps/align_si.sh: feature type is lda</span><br><span class="hljs-string">steps/align_si.sh: aligning data in data/mfcc/train using model from exp/tri2b, putting alignments in exp/tri2b_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri2b_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri2b_ali/log/analyze_alignments.log</span><br><span class="hljs-string">steps/align_si.sh: done aligning data.</span><br><span class="hljs-string">steps/train_sat.sh --cmd run.pl 2500 15000 data/mfcc/train data/lang exp/tri2b_ali exp/tri3b</span><br><span class="hljs-string">steps/train_sat.sh: feature type is lda</span><br><span class="hljs-string">steps/train_sat.sh: obtaining initial fMLLR transforms since not present in exp/tri2b_ali</span><br><span class="hljs-string">steps/train_sat.sh: Accumulating tree stats</span><br><span class="hljs-string">steps/train_sat.sh: Getting questions for tree clustering.</span><br><span class="hljs-string">steps/train_sat.sh: Building the tree</span><br><span class="hljs-string">steps/train_sat.sh: Initializing the model</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 109 with no stats; corresponding phone list: 110</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 121 with no stats; corresponding phone list: 122</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 163 with no stats; corresponding phone list: 164</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 175 with no stats; corresponding phone list: 176</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 176 with no stats; corresponding phone list: 177</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 177 with no stats; corresponding phone list: 178</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 182 with no stats; corresponding phone list: 183</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 203 with no stats; corresponding phone list: 204</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 208 with no stats; corresponding phone list: 209</span><br><span class="hljs-string">This is a bad warning.</span><br><span class="hljs-string">steps/train_sat.sh: Converting alignments from exp/tri2b_ali to use current tree</span><br><span class="hljs-string">steps/train_sat.sh: Compiling graphs of transcripts</span><br><span class="hljs-string">Pass 1</span><br><span class="hljs-string">Pass 2</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 3</span><br><span class="hljs-string">Pass 4</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 5</span><br><span class="hljs-string">Pass 6</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 7</span><br><span class="hljs-string">Pass 8</span><br><span class="hljs-string">Pass 9</span><br><span class="hljs-string">Pass 10</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Pass 11</span><br><span class="hljs-string">Pass 12</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 13</span><br><span class="hljs-string">Pass 14</span><br><span class="hljs-string">Pass 15</span><br><span class="hljs-string">Pass 16</span><br><span class="hljs-string">Pass 17</span><br><span class="hljs-string">Pass 18</span><br><span class="hljs-string">Pass 19</span><br><span class="hljs-string">Pass 20</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Pass 21</span><br><span class="hljs-string">Pass 22</span><br><span class="hljs-string">Pass 23</span><br><span class="hljs-string">Pass 24</span><br><span class="hljs-string">Pass 25</span><br><span class="hljs-string">Pass 26</span><br><span class="hljs-string">Pass 27</span><br><span class="hljs-string">Pass 28</span><br><span class="hljs-string">Pass 29</span><br><span class="hljs-string">Pass 30</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Pass 31</span><br><span class="hljs-string">Pass 32</span><br><span class="hljs-string">Pass 33</span><br><span class="hljs-string">Pass 34</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri3b</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri3b/log/analyze_alignments.log</span><br><span class="hljs-string">9 warnings in exp/tri3b/log/questions.log</span><br><span class="hljs-string">1 warnings in exp/tri3b/log/build_tree.log</span><br><span class="hljs-string">1 warnings in exp/tri3b/log/compile_questions.log</span><br><span class="hljs-string">223 warnings in exp/tri3b/log/align.*.*.log</span><br><span class="hljs-string">9 warnings in exp/tri3b/log/init_model.log</span><br><span class="hljs-string">18 warnings in exp/tri3b/log/fmllr.*.*.log</span><br><span class="hljs-string">9 warnings in exp/tri3b/log/est_alimdl.log</span><br><span class="hljs-string">306 warnings in exp/tri3b/log/update.*.log</span><br><span class="hljs-string">162 warnings in exp/tri3b/log/acc.*.*.log</span><br><span class="hljs-string">steps/train_sat.sh: Likelihood evolution:</span><br><span class="hljs-string">-49.8685 -49.6583 -49.5625 -49.3953 -48.7531 -48.2004 -47.8653 -47.6311 -47.4458 -46.9795 -46.7981 -46.6155 -46.501 -46.4056 -46.3145 -46.2267 -46.1436 -46.0697 -46.0008 -45.8483 -45.7595 -45.7067 -45.6578 -45.6099 -45.564 -45.5198 -45.4771 -45.4373 -45.3981 -45.3085 -45.2532 -45.2308 -45.2173 -45.2077</span><br><span class="hljs-string">exp/tri3b: nj=10 align prob=-48.00 over 25.48h [retry=0.6%, fail=0.1%] states=2056 gauss=15027 fmllr-impr=2.41 over 18.98h tree-impr=6.30</span><br><span class="hljs-string">steps/train_sat.sh: done training SAT system in exp/tri3b</span><br><span class="hljs-string">steps/align_fmllr.sh --nj 10 --cmd run.pl data/mfcc/train data/lang exp/tri3b exp/tri3b_ali</span><br><span class="hljs-string">steps/align_fmllr.sh: feature type is lda</span><br><span class="hljs-string">steps/align_fmllr.sh: compiling training graphs</span><br><span class="hljs-string">steps/align_fmllr.sh: aligning data in data/mfcc/train using exp/tri3b/final.alimdl and speaker-independent features.</span><br><span class="hljs-string">steps/align_fmllr.sh: computing fMLLR transforms</span><br><span class="hljs-string">steps/align_fmllr.sh: doing final alignment.</span><br><span class="hljs-string">steps/align_fmllr.sh: done aligning data.</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri3b_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri3b_ali/log/analyze_alignments.log</span><br><span class="hljs-string">62 warnings in exp/tri3b_ali/log/align_pass2.*.log</span><br><span class="hljs-string">43 warnings in exp/tri3b_ali/log/align_pass1.*.log</span><br><span class="hljs-string">3 warnings in exp/tri3b_ali/log/fmllr.*.log</span><br><span class="hljs-string">steps/train_quick.sh --cmd run.pl 4200 40000 data/mfcc/train data/lang exp/tri3b_ali exp/tri4b</span><br><span class="hljs-string">steps/train_quick.sh: feature type is lda</span><br><span class="hljs-string">steps/train_quick.sh: using transforms from exp/tri3b_ali</span><br><span class="hljs-string">steps/train_quick.sh: accumulating tree stats</span><br><span class="hljs-string">steps/train_quick.sh: Getting questions for tree clustering.</span><br><span class="hljs-string">steps/train_quick.sh: Building the tree</span><br><span class="hljs-string">steps/train_quick.sh: Initializing the model</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 109 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 121 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 163 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 175 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 176 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 177 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 203 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 208 of new tree has no stats.</span><br><span class="hljs-string">steps/train_quick.sh: This is a bad warning.</span><br><span class="hljs-string">steps/train_quick.sh: mixing up old model.</span><br><span class="hljs-string">steps/train_quick.sh: converting old alignments</span><br><span class="hljs-string">steps/train_quick.sh: compiling training graphs</span><br><span class="hljs-string">steps/train_quick.sh: pass 1</span><br><span class="hljs-string">steps/train_quick.sh: pass 2</span><br><span class="hljs-string">steps/train_quick.sh: pass 3</span><br><span class="hljs-string">steps/train_quick.sh: pass 4</span><br><span class="hljs-string">steps/train_quick.sh: pass 5</span><br><span class="hljs-string">steps/train_quick.sh: pass 6</span><br><span class="hljs-string">steps/train_quick.sh: pass 7</span><br><span class="hljs-string">steps/train_quick.sh: pass 8</span><br><span class="hljs-string">steps/train_quick.sh: pass 9</span><br><span class="hljs-string">steps/train_quick.sh: pass 10</span><br><span class="hljs-string">steps/train_quick.sh: aligning data</span><br><span class="hljs-string">steps/train_quick.sh: pass 11</span><br><span class="hljs-string">steps/train_quick.sh: pass 12</span><br><span class="hljs-string">steps/train_quick.sh: pass 13</span><br><span class="hljs-string">steps/train_quick.sh: pass 14</span><br><span class="hljs-string">steps/train_quick.sh: pass 15</span><br><span class="hljs-string">steps/train_quick.sh: aligning data</span><br><span class="hljs-string">steps/train_quick.sh: pass 16</span><br><span class="hljs-string">steps/train_quick.sh: pass 17</span><br><span class="hljs-string">steps/train_quick.sh: pass 18</span><br><span class="hljs-string">steps/train_quick.sh: pass 19</span><br><span class="hljs-string">steps/train_quick.sh: estimating alignment model</span><br><span class="hljs-string">Done</span><br><span class="hljs-string">steps/align_fmllr.sh --nj 10 --cmd run.pl data/mfcc/train data/lang exp/tri4b exp/tri4b_ali</span><br><span class="hljs-string">steps/align_fmllr.sh: feature type is lda</span><br><span class="hljs-string">steps/align_fmllr.sh: compiling training graphs</span><br><span class="hljs-string">steps/align_fmllr.sh: aligning data in data/mfcc/train using exp/tri4b/final.alimdl and speaker-independent features.</span><br><span class="hljs-string">steps/align_fmllr.sh: computing fMLLR transforms</span><br><span class="hljs-string">steps/align_fmllr.sh: doing final alignment.</span><br><span class="hljs-string">steps/align_fmllr.sh: done aligning data.</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri4b_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri4b_ali/log/analyze_alignments.log</span><br><span class="hljs-string">3 warnings in exp/tri4b_ali/log/fmllr.*.log</span><br><span class="hljs-string">32 warnings in exp/tri4b_ali/log/align_pass1.*.log</span><br><span class="hljs-string">53 warnings in exp/tri4b_ali/log/align_pass2.*.log</span><br><span class="hljs-string">###### Bookmark: TDNN-F Chain Training ######</span><br><span class="hljs-string">local/chain/run_tdnn-f_common_skip.sh --mfcc-dir data/mfcc/train --fbank-dir data/fbank/train --gmm-dir exp/tri4b --ali-dir exp/tri4b_ali</span><br><span class="hljs-string">local/chain/run_chain_common.sh --stage -10 --gmm-dir exp/tri4b --ali-dir exp/tri4b_ali --lores-train-data-dir data/mfcc/train --lang data/lang_chain --lat-dir exp/chain-skip/gmm_lats --num-leaves 5000 --tree-dir exp/chain-skip/tree</span><br><span class="hljs-string">local/chain/run_chain_common.sh: creating lang directory with one state per phone.</span><br><span class="hljs-string">steps/align_fmllr_lats.sh --nj 10 --cmd run.pl data/mfcc/train data/lang_chain exp/tri4b exp/chain-skip/gmm_lats</span><br><span class="hljs-string">steps/align_fmllr_lats.sh: feature type is lda</span><br><span class="hljs-string">steps/align_fmllr_lats.sh: compiling training graphs</span><br><span class="hljs-string">steps/align_fmllr_lats.sh: aligning data in data/mfcc/train using exp/tri4b/final.alimdl and speaker-independent features.</span><br><span class="hljs-string">steps/align_fmllr_lats.sh: computing fMLLR transforms</span><br><span class="hljs-string">steps/align_fmllr_lats.sh: generating lattices containing alternate pronunciations.</span><br><span class="hljs-string">steps/align_fmllr_lats.sh: done generating lattices from training transcripts.</span><br><span class="hljs-string">32 warnings in exp/chain-skip/gmm_lats/log/align_pass1.*.log</span><br><span class="hljs-string">3 warnings in exp/chain-skip/gmm_lats/log/fmllr.*.log</span><br><span class="hljs-string">2 warnings in exp/chain-skip/gmm_lats/log/generate_lattices.*.log</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh --frame-subsampling-factor 3 --context-opts --context-width=2 --central-position=1 --cmd run.pl 5000 data/mfcc/train data/lang_chain exp/tri4b_ali exp/chain-skip/tree</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: feature type is lda</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Using transforms from exp/tri4b_ali</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Initializing monophone model (for alignment conversion, in case topology changed)</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Accumulating tree stats</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Getting questions for tree clustering.</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Building the tree</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Initializing the model</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 109 with no stats; corresponding phone list: 110</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 121 with no stats; corresponding phone list: 122</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 163 with no stats; corresponding phone list: 164</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 175 with no stats; corresponding phone list: 176</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 176 with no stats; corresponding phone list: 177</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 177 with no stats; corresponding phone list: 178</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 203 with no stats; corresponding phone list: 204</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.10~1589-6d54]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 208 with no stats; corresponding phone list: 209</span><br><span class="hljs-string">This is a bad warning.</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Converting alignments from exp/tri4b_ali to use current tree</span><br><span class="hljs-string">steps/nnet3/chain/build_tree.sh: Done building tree</span><br><span class="hljs-string">local/chain/run_tdnn-f_common_skip.sh: creating neural net configs using the xconfig parser</span><br><span class="hljs-string">tree-info exp/chain-skip/tree/tree</span><br><span class="hljs-string">steps/nnet3/xconfig_to_configs.py --xconfig-file exp/chain-skip/tdnn-f-cn/configs/network.xconfig --config-dir exp/chain-skip/tdnn-f-cn/configs/</span><br><span class="hljs-string">nnet3-init exp/chain-skip/tdnn-f-cn/configs//init.config exp/chain-skip/tdnn-f-cn/configs//init.raw</span><br><span class="hljs-string">LOG (nnet3-init[5.5.10~1589-6d54]:main():nnet3-init.cc:80) Initialized raw neural net and wrote it to exp/chain-skip/tdnn-f-cn/configs//init.raw</span><br><span class="hljs-string">nnet3-info exp/chain-skip/tdnn-f-cn/configs//init.raw</span><br><span class="hljs-string">nnet3-init exp/chain-skip/tdnn-f-cn/configs//ref.config exp/chain-skip/tdnn-f-cn/configs//ref.raw</span><br><span class="hljs-string">LOG (nnet3-init[5.5.10~1589-6d54]:main():nnet3-init.cc:80) Initialized raw neural net and wrote it to exp/chain-skip/tdnn-f-cn/configs//ref.raw</span><br><span class="hljs-string">nnet3-info exp/chain-skip/tdnn-f-cn/configs//ref.raw</span><br><span class="hljs-string">nnet3-init exp/chain-skip/tdnn-f-cn/configs//ref.config exp/chain-skip/tdnn-f-cn/configs//ref.raw</span><br><span class="hljs-string">LOG (nnet3-init[5.5.10~1589-6d54]:main():nnet3-init.cc:80) Initialized raw neural net and wrote it to exp/chain-skip/tdnn-f-cn/configs//ref.raw</span><br><span class="hljs-string">nnet3-info exp/chain-skip/tdnn-f-cn/configs//ref.raw</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi-cslt/egs/thchs30/steps/libs/common.py:127: SyntaxWarning: &quot;is not&quot; with a literal. Did you mean &quot;!=&quot;?</span><br><span class="hljs-string">  if p.returncode is not 0:</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi-cslt/egs/thchs30/steps/libs/common.py:147: SyntaxWarning: &quot;is not&quot; with a literal. Did you mean &quot;!=&quot;?</span><br><span class="hljs-string">  if p.returncode is not 0:</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi-cslt/egs/thchs30/steps/libs/common.py:203: SyntaxWarning: &quot;is not&quot; with a literal. Did you mean &quot;!=&quot;?</span><br><span class="hljs-string">  if popen_object.returncode is not 0:</span><br><span class="hljs-string">2022-08-01 23:28:19,036 [steps/nnet3/chain/train.py:35 - &lt;module&gt; - INFO ] Starting chain model trainer (train.py)</span><br><span class="hljs-string">steps/nnet3/chain/train.py --stage -10 --cmd run.pl --feat.cmvn-opts --norm-means=false --norm-vars=false --chain.xent-regularize 0.1 --chain.leaky-hmm-coefficient 0.1 --chain.l2-regularize 0.0 --chain.apply-deriv-weights false --chain.lm-opts=--num-extra-lm-states=2000 --egs.dir  --egs.stage -10 --egs.opts --frames-overlap-per-eg 0 --egs.chunk-width 150,120,90 --trainer.num-chunk-per-minibatch 128 --trainer.frames-per-iter 1500000 --trainer.num-epochs 6 --use-gpu=wait --trainer.optimization.num-jobs-initial 2 --trainer.optimization.num-jobs-final 2 --trainer.optimization.initial-effective-lrate 0.05 --trainer.optimization.final-effective-lrate 0.001 --trainer.max-param-change 2.0 --cleanup.remove-egs false --cleanup.preserve-model-interval 10 --feat-dir data/fbank/train --tree-dir exp/chain-skip/tree --lat-dir exp/chain-skip/gmm_lats --dir exp/chain-skip/tdnn-f-cn</span><br><span class="hljs-string">[&#x27;</span>steps/nnet3/chain/train.py<span class="hljs-string">&#x27;, &#x27;</span>--stage<span class="hljs-string">&#x27;, &#x27;</span>-10<span class="hljs-string">&#x27;, &#x27;</span>--cmd<span class="hljs-string">&#x27;, &#x27;</span>run.pl<span class="hljs-string">&#x27;, &#x27;</span>--feat.cmvn-opts<span class="hljs-string">&#x27;, &#x27;</span>--norm-means=<span class="hljs-literal">false</span> --norm-vars=<span class="hljs-literal">false</span><span class="hljs-string">&#x27;, &#x27;</span>--chain.xent-regularize<span class="hljs-string">&#x27;, &#x27;</span>0.1<span class="hljs-string">&#x27;, &#x27;</span>--chain.leaky-hmm-coefficient<span class="hljs-string">&#x27;, &#x27;</span>0.1<span class="hljs-string">&#x27;, &#x27;</span>--chain.l2-regularize<span class="hljs-string">&#x27;, &#x27;</span>0.0<span class="hljs-string">&#x27;, &#x27;</span>--chain.apply-deriv-weights<span class="hljs-string">&#x27;, &#x27;</span><span class="hljs-literal">false</span><span class="hljs-string">&#x27;, &#x27;</span>--chain.lm-opts=--num-extra-lm-states=2000<span class="hljs-string">&#x27;, &#x27;</span>--egs.dir<span class="hljs-string">&#x27;, &#x27;</span><span class="hljs-string">&#x27;, &#x27;</span>--egs.stage<span class="hljs-string">&#x27;, &#x27;</span>-10<span class="hljs-string">&#x27;, &#x27;</span>--egs.opts<span class="hljs-string">&#x27;, &#x27;</span>--frames-overlap-per-eg 0<span class="hljs-string">&#x27;, &#x27;</span>--egs.chunk-width<span class="hljs-string">&#x27;, &#x27;</span>150,120,90<span class="hljs-string">&#x27;, &#x27;</span>--trainer.num-chunk-per-minibatch<span class="hljs-string">&#x27;, &#x27;</span>128<span class="hljs-string">&#x27;, &#x27;</span>--trainer.frames-per-iter<span class="hljs-string">&#x27;, &#x27;</span>1500000<span class="hljs-string">&#x27;, &#x27;</span>--trainer.num-epochs<span class="hljs-string">&#x27;, &#x27;</span>6<span class="hljs-string">&#x27;, &#x27;</span>--use-gpu=<span class="hljs-built_in">wait</span><span class="hljs-string">&#x27;, &#x27;</span>--trainer.optimization.num-jobs-initial<span class="hljs-string">&#x27;, &#x27;</span>2<span class="hljs-string">&#x27;, &#x27;</span>--trainer.optimization.num-jobs-final<span class="hljs-string">&#x27;, &#x27;</span>2<span class="hljs-string">&#x27;, &#x27;</span>--trainer.optimization.initial-effective-lrate<span class="hljs-string">&#x27;, &#x27;</span>0.05<span class="hljs-string">&#x27;, &#x27;</span>--trainer.optimization.final-effective-lrate<span class="hljs-string">&#x27;, &#x27;</span>0.001<span class="hljs-string">&#x27;, &#x27;</span>--trainer.max-param-change<span class="hljs-string">&#x27;, &#x27;</span>2.0<span class="hljs-string">&#x27;, &#x27;</span>--cleanup.remove-egs<span class="hljs-string">&#x27;, &#x27;</span><span class="hljs-literal">false</span><span class="hljs-string">&#x27;, &#x27;</span>--cleanup.preserve-model-interval<span class="hljs-string">&#x27;, &#x27;</span>10<span class="hljs-string">&#x27;, &#x27;</span>--feat-dir<span class="hljs-string">&#x27;, &#x27;</span>data/fbank/train<span class="hljs-string">&#x27;, &#x27;</span>--tree-dir<span class="hljs-string">&#x27;, &#x27;</span>exp/chain-skip/tree<span class="hljs-string">&#x27;, &#x27;</span>--lat-dir<span class="hljs-string">&#x27;, &#x27;</span>exp/chain-skip/gmm_lats<span class="hljs-string">&#x27;, &#x27;</span>--<span class="hljs-built_in">dir</span><span class="hljs-string">&#x27;, &#x27;</span>exp/chain-skip/tdnn-f-cn<span class="hljs-string">&#x27;]</span><br><span class="hljs-string">2022-08-01 23:28:19,196 [steps/nnet3/chain/train.py:284 - train - INFO ] Arguments for the experiment</span><br><span class="hljs-string">&#123;&#x27;</span>alignment_subsampling_factor<span class="hljs-string">&#x27;: 3,</span><br><span class="hljs-string"> &#x27;</span>apply_deriv_weights<span class="hljs-string">&#x27;: False,</span><br><span class="hljs-string"> &#x27;</span>backstitch_training_interval<span class="hljs-string">&#x27;: 1,</span><br><span class="hljs-string"> &#x27;</span>backstitch_training_scale<span class="hljs-string">&#x27;: 0.0,</span><br><span class="hljs-string"> &#x27;</span>chain_opts<span class="hljs-string">&#x27;: &#x27;</span><span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>chunk_left_context<span class="hljs-string">&#x27;: 0,</span><br><span class="hljs-string"> &#x27;</span>chunk_left_context_initial<span class="hljs-string">&#x27;: -1,</span><br><span class="hljs-string"> &#x27;</span>chunk_right_context<span class="hljs-string">&#x27;: 0,</span><br><span class="hljs-string"> &#x27;</span>chunk_right_context_final<span class="hljs-string">&#x27;: -1,</span><br><span class="hljs-string"> &#x27;</span>chunk_width<span class="hljs-string">&#x27;: &#x27;</span>150,120,90<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>cleanup<span class="hljs-string">&#x27;: True,</span><br><span class="hljs-string"> &#x27;</span>cmvn_opts<span class="hljs-string">&#x27;: &#x27;</span>--norm-means=<span class="hljs-literal">false</span> --norm-vars=<span class="hljs-literal">false</span><span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>combine_sum_to_one_penalty<span class="hljs-string">&#x27;: 0.0,</span><br><span class="hljs-string"> &#x27;</span><span class="hljs-built_in">command</span><span class="hljs-string">&#x27;: &#x27;</span>run.pl<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>compute_per_dim_accuracy<span class="hljs-string">&#x27;: False,</span><br><span class="hljs-string"> &#x27;</span>deriv_truncate_margin<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span><span class="hljs-built_in">dir</span><span class="hljs-string">&#x27;: &#x27;</span>exp/chain-skip/tdnn-f-cn<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>do_final_combination<span class="hljs-string">&#x27;: True,</span><br><span class="hljs-string"> &#x27;</span>dropout_schedule<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>egs_command<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>egs_dir<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>egs_nj<span class="hljs-string">&#x27;: 0,</span><br><span class="hljs-string"> &#x27;</span>egs_opts<span class="hljs-string">&#x27;: &#x27;</span>--frames-overlap-per-eg 0<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>egs_stage<span class="hljs-string">&#x27;: -10,</span><br><span class="hljs-string"> &#x27;</span>email<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>exit_stage<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>feat_dir<span class="hljs-string">&#x27;: &#x27;</span>data/fbank/train<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>final_effective_lrate<span class="hljs-string">&#x27;: 0.001,</span><br><span class="hljs-string"> &#x27;</span>frame_subsampling_factor<span class="hljs-string">&#x27;: 3,</span><br><span class="hljs-string"> &#x27;</span>frames_per_iter<span class="hljs-string">&#x27;: 1500000,</span><br><span class="hljs-string"> &#x27;</span>initial_effective_lrate<span class="hljs-string">&#x27;: 0.05,</span><br><span class="hljs-string"> &#x27;</span>input_model<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>l2_regularize<span class="hljs-string">&#x27;: 0.0,</span><br><span class="hljs-string"> &#x27;</span>lat_dir<span class="hljs-string">&#x27;: &#x27;</span>exp/chain-skip/gmm_lats<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>leaky_hmm_coefficient<span class="hljs-string">&#x27;: 0.1,</span><br><span class="hljs-string"> &#x27;</span>left_deriv_truncate<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>left_tolerance<span class="hljs-string">&#x27;: 5,</span><br><span class="hljs-string"> &#x27;</span>lm_opts<span class="hljs-string">&#x27;: &#x27;</span>--num-extra-lm-states=2000<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>max_lda_jobs<span class="hljs-string">&#x27;: 10,</span><br><span class="hljs-string"> &#x27;</span>max_models_combine<span class="hljs-string">&#x27;: 20,</span><br><span class="hljs-string"> &#x27;</span>max_objective_evaluations<span class="hljs-string">&#x27;: 30,</span><br><span class="hljs-string"> &#x27;</span>max_param_change<span class="hljs-string">&#x27;: 2.0,</span><br><span class="hljs-string"> &#x27;</span>momentum<span class="hljs-string">&#x27;: 0.0,</span><br><span class="hljs-string"> &#x27;</span>num_chunk_per_minibatch<span class="hljs-string">&#x27;: &#x27;</span>128<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>num_epochs<span class="hljs-string">&#x27;: 6.0,</span><br><span class="hljs-string"> &#x27;</span>num_jobs_final<span class="hljs-string">&#x27;: 2,</span><br><span class="hljs-string"> &#x27;</span>num_jobs_initial<span class="hljs-string">&#x27;: 2,</span><br><span class="hljs-string"> &#x27;</span>num_jobs_step<span class="hljs-string">&#x27;: 1,</span><br><span class="hljs-string"> &#x27;</span>online_ivector_dir<span class="hljs-string">&#x27;: None,</span><br><span class="hljs-string"> &#x27;</span>preserve_model_interval<span class="hljs-string">&#x27;: 10,</span><br><span class="hljs-string"> &#x27;</span>presoftmax_prior_scale_power<span class="hljs-string">&#x27;: -0.25,</span><br><span class="hljs-string"> &#x27;</span>proportional_shrink<span class="hljs-string">&#x27;: 0.0,</span><br><span class="hljs-string"> &#x27;</span>rand_prune<span class="hljs-string">&#x27;: 4.0,</span><br><span class="hljs-string"> &#x27;</span>remove_egs<span class="hljs-string">&#x27;: False,</span><br><span class="hljs-string"> &#x27;</span>reporting_interval<span class="hljs-string">&#x27;: 0.1,</span><br><span class="hljs-string"> &#x27;</span>right_tolerance<span class="hljs-string">&#x27;: 5,</span><br><span class="hljs-string"> &#x27;</span>samples_per_iter<span class="hljs-string">&#x27;: 400000,</span><br><span class="hljs-string"> &#x27;</span>shrink_saturation_threshold<span class="hljs-string">&#x27;: 0.4,</span><br><span class="hljs-string"> &#x27;</span>shrink_value<span class="hljs-string">&#x27;: 1.0,</span><br><span class="hljs-string"> &#x27;</span>shuffle_buffer_size<span class="hljs-string">&#x27;: 5000,</span><br><span class="hljs-string"> &#x27;</span>srand<span class="hljs-string">&#x27;: 0,</span><br><span class="hljs-string"> &#x27;</span>stage<span class="hljs-string">&#x27;: -10,</span><br><span class="hljs-string"> &#x27;</span>train_opts<span class="hljs-string">&#x27;: [],</span><br><span class="hljs-string"> &#x27;</span>tree_dir<span class="hljs-string">&#x27;: &#x27;</span>exp/chain-skip/tree<span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>use_gpu<span class="hljs-string">&#x27;: &#x27;</span><span class="hljs-built_in">wait</span><span class="hljs-string">&#x27;,</span><br><span class="hljs-string"> &#x27;</span>xent_regularize<span class="hljs-string">&#x27;: 0.1&#125;</span><br><span class="hljs-string">2022-08-01 23:28:26,740 [steps/nnet3/chain/train.py:341 - train - INFO ] Creating phone language-model</span><br><span class="hljs-string">2022-08-01 23:28:29,310 [steps/nnet3/chain/train.py:346 - train - INFO ] Creating denominator FST</span><br><span class="hljs-string">copy-transition-model exp/chain-skip/tree/final.mdl exp/chain-skip/tdnn-f-cn/0.trans_mdl</span><br><span class="hljs-string">LOG (copy-transition-model[5.5.10~1589-6d54]:main():copy-transition-model.cc:62) Copied transition model.</span><br><span class="hljs-string">2022-08-01 23:28:32,318 [steps/nnet3/chain/train.py:353 - train - INFO ] Initializing a basic network for estimating preconditioning matrix</span><br><span class="hljs-string">2022-08-01 23:28:33,457 [steps/nnet3/chain/train.py:382 - train - INFO ] Generating egs</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh --frames-overlap-per-eg 0 --cmd run.pl --cmvn-opts --norm-means=false --norm-vars=false --online-ivector-dir  --left-context 22 --right-context 22 --left-context-initial -1 --right-context-final -1 --left-tolerance 5 --right-tolerance 5 --frame-subsampling-factor 3 --alignment-subsampling-factor 3 --stage -10 --frames-per-iter 1500000 --frames-per-eg 150,120,90 --srand 0 data/fbank/train exp/chain-skip/tdnn-f-cn exp/chain-skip/gmm_lats exp/chain-skip/tdnn-f-cn/egs</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: Holding out 300 utterances in validation set and 300 in training diagnostic set, out of total 10000.</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: creating egs.  To ensure they are not deleted later you can do:  touch exp/chain-skip/tdnn-f-cn/egs/.nodelete</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: feature type is raw, with &#x27;</span>apply-cmvn<span class="hljs-string">&#x27;</span><br><span class="hljs-string">tree-info exp/chain-skip/tdnn-f-cn/tree</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: working out number of frames of training data</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: working out feature dim</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: creating 7 archives, each with 14597 egs, with</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh:   150,120,90 labels per example, and (left,right) context = (22,22)</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: Getting validation and training subset examples in background.</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: Generating training examples on disk</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: recombining and shuffling order of archives on disk</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: Getting subsets of validation examples for diagnostics and combination.</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: Removing temporary archives, alignments and lattices</span><br><span class="hljs-string">steps/nnet3/chain/get_egs.sh: Finished preparing training examples</span><br><span class="hljs-string">2022-08-01 23:30:40,555 [steps/nnet3/chain/train.py:431 - train - INFO ] Copying the properties from exp/chain-skip/tdnn-f-cn/egs to exp/chain-skip/tdnn-f-cn</span><br><span class="hljs-string">2022-08-01 23:30:40,597 [steps/nnet3/chain/train.py:445 - train - INFO ] Computing the preconditioning matrix for input features</span><br><span class="hljs-string">2022-08-01 23:31:03,108 [steps/nnet3/chain/train.py:454 - train - INFO ] Preparing the initial acoustic model.</span><br><span class="hljs-string">2022-08-01 23:31:08,320 [steps/nnet3/chain/train.py:487 - train - INFO ] Training will run for 6.0 epochs = 63 iterations</span><br><span class="hljs-string">2022-08-01 23:31:08,324 [steps/nnet3/chain/train.py:529 - train - INFO ] Iter: 0/62   Jobs: 2   Epoch: 0.00/6.0 (0.0% complete)   lr: 0.100000</span><br><span class="hljs-string">run.pl: job failed, log is in exp/chain-skip/tdnn-f-cn/log/train.0.1.log</span><br><span class="hljs-string">2022-08-01 23:31:26,659 [/mnt/c/Users/ABC/Desktop/kaldi-cslt/egs/thchs30/steps/libs/common.py:207 - background_command_waiter - ERROR ] Command exited with status 1: run.pl --gpu 1 exp/chain-skip/tdnn-f-cn/log/train.0.1.log                     nnet3-chain-train --use-gpu=wait                      --apply-deriv-weights=False                     --l2-regularize=0.0 --leaky-hmm-coefficient=0.1                      --write-cache=exp/chain-skip/tdnn-f-cn/cache.1  --xent-regularize=0.1                                          --print-interval=10 --momentum=0.0                     --max-param-change=1.414213562373095                     --backstitch-training-scale=0.0                     --backstitch-training-interval=1                     --l2-regularize-factor=0.5                       --srand=0                     &quot;nnet3-am-copy --raw=true --learning-rate=0.1 --scale=1.0 exp/chain-skip/tdnn-f-cn/0.mdl - |&quot; exp/chain-skip/tdnn-f-cn/den.fst                     &quot;ark,bg:nnet3-chain-copy-egs                          --frame-shift=1                         ark:exp/chain-skip/tdnn-f-cn/egs/cegs.1.ark ark:- |                         nnet3-chain-shuffle-egs --buffer-size=5000                         --srand=0 ark:- ark:- | nnet3-chain-merge-egs                         --minibatch-size=64 ark:- ark:- |&quot;                     exp/chain-skip/tdnn-f-cn/1.1.raw</span><br></code></pre></td></tr></table></figure>











<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br></pre></td><td class="code"><pre><code class="hljs sh">creating data/&#123;train,dev,<span class="hljs-built_in">test</span>&#125;<br>cleaning data/train<br>preparing scps and text <span class="hljs-keyword">in</span> data/train<br>cleaning data/dev<br>preparing scps and text <span class="hljs-keyword">in</span> data/dev<br>cleaning data/test<br>preparing scps and text <span class="hljs-keyword">in</span> data/test<br>creating test_phone <span class="hljs-keyword">for</span> phone decoding<br>steps/make_mfcc.sh --nj 8 --cmd run.pl data/mfcc/train exp/make_mfcc/train mfcc/train<br>utils/validate_data_dir.sh: Successfully validated data-directory data/mfcc/train<br>steps/make_mfcc.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.<br>steps/make_mfcc.sh: Succeeded creating MFCC features <span class="hljs-keyword">for</span> train<br>steps/compute_cmvn_stats.sh data/mfcc/train exp/mfcc_cmvn/train mfcc/train<br>Succeeded creating CMVN stats <span class="hljs-keyword">for</span> train<br>steps/make_mfcc.sh --nj 8 --cmd run.pl data/mfcc/dev exp/make_mfcc/dev mfcc/dev<br>utils/validate_data_dir.sh: Successfully validated data-directory data/mfcc/dev<br>steps/make_mfcc.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.<br>steps/make_mfcc.sh: Succeeded creating MFCC features <span class="hljs-keyword">for</span> dev<br>steps/compute_cmvn_stats.sh data/mfcc/dev exp/mfcc_cmvn/dev mfcc/dev<br>Succeeded creating CMVN stats <span class="hljs-keyword">for</span> dev<br>steps/make_mfcc.sh --nj 8 --cmd run.pl data/mfcc/test exp/make_mfcc/test mfcc/test<br>utils/validate_data_dir.sh: Successfully validated data-directory data/mfcc/test<br>steps/make_mfcc.sh: [info]: no segments file exists: assuming wav.scp indexed by utterance.<br>steps/make_mfcc.sh: Succeeded creating MFCC features <span class="hljs-keyword">for</span> <span class="hljs-built_in">test</span><br>steps/compute_cmvn_stats.sh data/mfcc/test exp/mfcc_cmvn/test mfcc/test<br>Succeeded creating CMVN stats <span class="hljs-keyword">for</span> <span class="hljs-built_in">test</span><br>make word graph ...<br>utils/prepare_lang.sh --position_dependent_phones <span class="hljs-literal">false</span> data/dict &lt;SPOKEN_NOISE&gt; data/local/lang data/lang<br>Checking data/dict/silence_phones.txt ...<br>--&gt; reading data/dict/silence_phones.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/silence_phones.txt is OK<br><br>Checking data/dict/optional_silence.txt ...<br>--&gt; reading data/dict/optional_silence.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/optional_silence.txt is OK<br><br>Checking data/dict/nonsilence_phones.txt ...<br>--&gt; reading data/dict/nonsilence_phones.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/nonsilence_phones.txt is OK<br><br>Checking disjoint: silence_phones.txt, nonsilence_phones.txt<br>--&gt; disjoint property is OK.<br><br>Checking data/dict/lexicon.txt<br>--&gt; reading data/dict/lexicon.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/lexicon.txt is OK<br><br>Checking data/dict/extra_questions.txt ...<br>--&gt; reading data/dict/extra_questions.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict/extra_questions.txt is OK<br>--&gt; SUCCESS [validating dictionary directory data/dict]<br><br>**Creating data/dict/lexiconp.txt from data/dict/lexicon.txt<br>fstaddselfloops data/lang/phones/wdisambig_phones.int data/lang/phones/wdisambig_words.int<br>prepare_lang.sh: validating output directory<br>utils/validate_lang.pl data/lang<br>Checking existence of separator file<br>separator file data/lang/subword_separator.txt is empty or does not exist, deal <span class="hljs-keyword">in</span> word <span class="hljs-keyword">case</span>.<br>Checking data/lang/phones.txt ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/lang/phones.txt is OK<br><br>Checking words.txt: <span class="hljs-comment">#0 ...</span><br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/lang/words.txt is OK<br><br>Checking disjoint: silence.txt, nonsilence.txt, disambig.txt ...<br>--&gt; silence.txt and nonsilence.txt are disjoint<br>--&gt; silence.txt and disambig.txt are disjoint<br>--&gt; disambig.txt and nonsilence.txt are disjoint<br>--&gt; disjoint property is OK<br><br>Checking sumation: silence.txt, nonsilence.txt, disambig.txt ...<br>--&gt; found no unexplainable phones <span class="hljs-keyword">in</span> phones.txt<br><br>Checking data/lang/phones/context_indep.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/context_indep.txt<br>--&gt; data/lang/phones/context_indep.int corresponds to data/lang/phones/context_indep.txt<br>--&gt; data/lang/phones/context_indep.csl corresponds to data/lang/phones/context_indep.txt<br>--&gt; data/lang/phones/context_indep.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/nonsilence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 217 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/nonsilence.txt<br>--&gt; data/lang/phones/nonsilence.int corresponds to data/lang/phones/nonsilence.txt<br>--&gt; data/lang/phones/nonsilence.csl corresponds to data/lang/phones/nonsilence.txt<br>--&gt; data/lang/phones/nonsilence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/silence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/silence.txt<br>--&gt; data/lang/phones/silence.int corresponds to data/lang/phones/silence.txt<br>--&gt; data/lang/phones/silence.csl corresponds to data/lang/phones/silence.txt<br>--&gt; data/lang/phones/silence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/optional_silence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.int corresponds to data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.csl corresponds to data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/disambig.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 57 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/disambig.txt<br>--&gt; data/lang/phones/disambig.int corresponds to data/lang/phones/disambig.txt<br>--&gt; data/lang/phones/disambig.csl corresponds to data/lang/phones/disambig.txt<br>--&gt; data/lang/phones/disambig.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang/phones/roots.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 218 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/roots.txt<br>--&gt; data/lang/phones/roots.int corresponds to data/lang/phones/roots.txt<br>--&gt; data/lang/phones/roots.&#123;txt, int&#125; are OK<br><br>Checking data/lang/phones/sets.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 218 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/sets.txt<br>--&gt; data/lang/phones/sets.int corresponds to data/lang/phones/sets.txt<br>--&gt; data/lang/phones/sets.&#123;txt, int&#125; are OK<br><br>Checking data/lang/phones/extra_questions.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 7 entry/entries <span class="hljs-keyword">in</span> data/lang/phones/extra_questions.txt<br>--&gt; data/lang/phones/extra_questions.int corresponds to data/lang/phones/extra_questions.txt<br>--&gt; data/lang/phones/extra_questions.&#123;txt, int&#125; are OK<br><br>Checking optional_silence.txt ...<br>--&gt; reading data/lang/phones/optional_silence.txt<br>--&gt; data/lang/phones/optional_silence.txt is OK<br><br>Checking disambiguation symbols: <span class="hljs-comment">#0 and #1</span><br>--&gt; data/lang/phones/disambig.txt has <span class="hljs-string">&quot;#0&quot;</span> and <span class="hljs-string">&quot;#1&quot;</span><br>--&gt; data/lang/phones/disambig.txt is OK<br><br>Checking topo ...<br><br>Checking word-level disambiguation symbols...<br>--&gt; data/lang/phones/wdisambig.txt exists (newer prepare_lang.sh)<br>Checking data/lang/oov.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang/oov.txt<br>--&gt; data/lang/oov.int corresponds to data/lang/oov.txt<br>--&gt; data/lang/oov.&#123;txt, int&#125; are OK<br><br>--&gt; data/lang/L.fst is olabel sorted<br>--&gt; data/lang/L_disambig.fst is olabel sorted<br>--&gt; SUCCESS [validating lang directory data/lang]<br>Converting <span class="hljs-string">&#x27;data/graph/word.3gram.lm.gz&#x27;</span> to FST<br>arpa2fst --disambig-symbol=<span class="hljs-comment">#0 --read-symbol-table=data/graph/lang/words.txt - data/graph/lang/G.fst</span><br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:94) Reading \data\ section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:149) Reading \1-grams: section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:149) Reading \2-grams: section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:149) Reading \3-grams: section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:RemoveRedundantStates():arpa-lm-compiler.cc:359) Reduced num-states from 3076353 to 454251<br>fstisstochastic data/graph/lang/G.fst<br>-7.27093e-08 -0.832396<br>Succeeded <span class="hljs-keyword">in</span> formatting LM: <span class="hljs-string">&#x27;data/graph/word.3gram.lm.gz&#x27;</span><br>make phone graph ...<br>utils/prepare_lang.sh --position_dependent_phones <span class="hljs-literal">false</span> data/dict_phone &lt;SPOKEN_NOISE&gt; data/local/lang_phone data/lang_phone<br>Checking data/dict_phone/silence_phones.txt ...<br>--&gt; reading data/dict_phone/silence_phones.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict_phone/silence_phones.txt is OK<br><br>Checking data/dict_phone/optional_silence.txt ...<br>--&gt; reading data/dict_phone/optional_silence.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict_phone/optional_silence.txt is OK<br><br>Checking data/dict_phone/nonsilence_phones.txt ...<br>--&gt; reading data/dict_phone/nonsilence_phones.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict_phone/nonsilence_phones.txt is OK<br><br>Checking disjoint: silence_phones.txt, nonsilence_phones.txt<br>--&gt; disjoint property is OK.<br><br>Checking data/dict_phone/lexicon.txt<br>--&gt; reading data/dict_phone/lexicon.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict_phone/lexicon.txt is OK<br><br>Checking data/dict_phone/extra_questions.txt ...<br>--&gt; reading data/dict_phone/extra_questions.txt<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/dict_phone/extra_questions.txt is OK<br>--&gt; SUCCESS [validating dictionary directory data/dict_phone]<br><br>**Creating data/dict_phone/lexiconp.txt from data/dict_phone/lexicon.txt<br>fstaddselfloops data/lang_phone/phones/wdisambig_phones.int data/lang_phone/phones/wdisambig_words.int<br>prepare_lang.sh: validating output directory<br>utils/validate_lang.pl data/lang_phone<br>Checking existence of separator file<br>separator file data/lang_phone/subword_separator.txt is empty or does not exist, deal <span class="hljs-keyword">in</span> word <span class="hljs-keyword">case</span>.<br>Checking data/lang_phone/phones.txt ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/lang_phone/phones.txt is OK<br><br>Checking words.txt: <span class="hljs-comment">#0 ...</span><br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; data/lang_phone/words.txt is OK<br><br>Checking disjoint: silence.txt, nonsilence.txt, disambig.txt ...<br>--&gt; silence.txt and nonsilence.txt are disjoint<br>--&gt; silence.txt and disambig.txt are disjoint<br>--&gt; disambig.txt and nonsilence.txt are disjoint<br>--&gt; disjoint property is OK<br><br>Checking sumation: silence.txt, nonsilence.txt, disambig.txt ...<br>--&gt; found no unexplainable phones <span class="hljs-keyword">in</span> phones.txt<br><br>Checking data/lang_phone/phones/context_indep.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/context_indep.txt<br>--&gt; data/lang_phone/phones/context_indep.int corresponds to data/lang_phone/phones/context_indep.txt<br>--&gt; data/lang_phone/phones/context_indep.csl corresponds to data/lang_phone/phones/context_indep.txt<br>--&gt; data/lang_phone/phones/context_indep.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang_phone/phones/nonsilence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 217 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/nonsilence.txt<br>--&gt; data/lang_phone/phones/nonsilence.int corresponds to data/lang_phone/phones/nonsilence.txt<br>--&gt; data/lang_phone/phones/nonsilence.csl corresponds to data/lang_phone/phones/nonsilence.txt<br>--&gt; data/lang_phone/phones/nonsilence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang_phone/phones/silence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/silence.txt<br>--&gt; data/lang_phone/phones/silence.int corresponds to data/lang_phone/phones/silence.txt<br>--&gt; data/lang_phone/phones/silence.csl corresponds to data/lang_phone/phones/silence.txt<br>--&gt; data/lang_phone/phones/silence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang_phone/phones/optional_silence.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/optional_silence.txt<br>--&gt; data/lang_phone/phones/optional_silence.int corresponds to data/lang_phone/phones/optional_silence.txt<br>--&gt; data/lang_phone/phones/optional_silence.csl corresponds to data/lang_phone/phones/optional_silence.txt<br>--&gt; data/lang_phone/phones/optional_silence.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang_phone/phones/disambig.&#123;txt, int, csl&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 4 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/disambig.txt<br>--&gt; data/lang_phone/phones/disambig.int corresponds to data/lang_phone/phones/disambig.txt<br>--&gt; data/lang_phone/phones/disambig.csl corresponds to data/lang_phone/phones/disambig.txt<br>--&gt; data/lang_phone/phones/disambig.&#123;txt, int, csl&#125; are OK<br><br>Checking data/lang_phone/phones/roots.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 218 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/roots.txt<br>--&gt; data/lang_phone/phones/roots.int corresponds to data/lang_phone/phones/roots.txt<br>--&gt; data/lang_phone/phones/roots.&#123;txt, int&#125; are OK<br><br>Checking data/lang_phone/phones/sets.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 218 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/sets.txt<br>--&gt; data/lang_phone/phones/sets.int corresponds to data/lang_phone/phones/sets.txt<br>--&gt; data/lang_phone/phones/sets.&#123;txt, int&#125; are OK<br><br>Checking data/lang_phone/phones/extra_questions.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 7 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/phones/extra_questions.txt<br>--&gt; data/lang_phone/phones/extra_questions.int corresponds to data/lang_phone/phones/extra_questions.txt<br>--&gt; data/lang_phone/phones/extra_questions.&#123;txt, int&#125; are OK<br><br>Checking optional_silence.txt ...<br>--&gt; reading data/lang_phone/phones/optional_silence.txt<br>--&gt; data/lang_phone/phones/optional_silence.txt is OK<br><br>Checking disambiguation symbols: <span class="hljs-comment">#0 and #1</span><br>--&gt; data/lang_phone/phones/disambig.txt has <span class="hljs-string">&quot;#0&quot;</span> and <span class="hljs-string">&quot;#1&quot;</span><br>--&gt; data/lang_phone/phones/disambig.txt is OK<br><br>Checking topo ...<br><br>Checking word-level disambiguation symbols...<br>--&gt; data/lang_phone/phones/wdisambig.txt exists (newer prepare_lang.sh)<br>Checking data/lang_phone/oov.&#123;txt, int&#125; ...<br>--&gt; text seems to be UTF-8 or ASCII, checking whitespaces<br>--&gt; text contains only allowed whitespaces<br>--&gt; 1 entry/entries <span class="hljs-keyword">in</span> data/lang_phone/oov.txt<br>--&gt; data/lang_phone/oov.int corresponds to data/lang_phone/oov.txt<br>--&gt; data/lang_phone/oov.&#123;txt, int&#125; are OK<br><br>--&gt; data/lang_phone/L.fst is olabel sorted<br>--&gt; data/lang_phone/L_disambig.fst is olabel sorted<br>--&gt; SUCCESS [validating lang directory data/lang_phone]<br>Converting <span class="hljs-string">&#x27;data/graph_phone/phone.3gram.lm.gz&#x27;</span> to FST<br>arpa2fst --disambig-symbol=<span class="hljs-comment">#0 --read-symbol-table=data/graph_phone/lang/words.txt - data/graph_phone/lang/G.fst</span><br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:94) Reading \data\ section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:149) Reading \1-grams: section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:149) Reading \2-grams: section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:Read():arpa-file-parser.cc:149) Reading \3-grams: section.<br>LOG (arpa2fst[5.5.1038~1-9af2c]:RemoveRedundantStates():arpa-lm-compiler.cc:359) Reduced num-states from 5709 to 4848<br>fstisstochastic data/graph_phone/lang/G.fst<br>1.86678e-07 -3.76792<br>Succeeded <span class="hljs-keyword">in</span> formatting LM: <span class="hljs-string">&#x27;data/graph_phone/phone.3gram.lm.gz&#x27;</span><br>steps/train_mono.sh --boost-silence 1.25 --nj 8 --cmd run.pl data/mfcc/train data/lang exp/mono<br>steps/train_mono.sh: Initializing monophone system.<br>steps/train_mono.sh: Compiling training graphs<br>steps/train_mono.sh: Aligning data equally (pass 0)<br>steps/train_mono.sh: Pass 1<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 2<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 3<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 4<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 5<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 6<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 7<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 8<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 9<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 10<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 11<br>steps/train_mono.sh: Pass 12<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 13<br>steps/train_mono.sh: Pass 14<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 15<br>steps/train_mono.sh: Pass 16<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 17<br>steps/train_mono.sh: Pass 18<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 19<br>steps/train_mono.sh: Pass 20<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 21<br>steps/train_mono.sh: Pass 22<br>steps/train_mono.sh: Pass 23<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 24<br>steps/train_mono.sh: Pass 25<br>steps/train_mono.sh: Pass 26<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 27<br>steps/train_mono.sh: Pass 28<br>steps/train_mono.sh: Pass 29<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 30<br>steps/train_mono.sh: Pass 31<br>steps/train_mono.sh: Pass 32<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 33<br>steps/train_mono.sh: Pass 34<br>steps/train_mono.sh: Pass 35<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 36<br>steps/train_mono.sh: Pass 37<br>steps/train_mono.sh: Pass 38<br>steps/train_mono.sh: Aligning data<br>steps/train_mono.sh: Pass 39<br>steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/mono<br>steps/diagnostic/analyze_alignments.sh: see stats <span class="hljs-keyword">in</span> exp/mono/log/analyze_alignments.log<br>56 warnings <span class="hljs-keyword">in</span> exp/mono/log/acc.*.*.<span class="hljs-built_in">log</span><br>3976 warnings <span class="hljs-keyword">in</span> exp/mono/log/align.*.*.<span class="hljs-built_in">log</span><br>1053 warnings <span class="hljs-keyword">in</span> exp/mono/log/update.*.<span class="hljs-built_in">log</span><br>exp/mono: nj=8 align prob=-100.09 over 25.49h [retry=0.2%, fail=0.0%] states=656 gauss=990<br>steps/train_mono.sh: Done training monophone system <span class="hljs-keyword">in</span> exp/mono<br>steps/align_si.sh --boost-silence 1.25 --nj 8 --cmd run.pl data/mfcc/train data/lang exp/mono exp/mono_ali<br>using monophone to generate graph<br>WARNING: the --mono, --left-biphone and --quinphone options are now deprecated and ignored.<br>tree-info exp/mono/tree<br>steps/align_si.sh: feature <span class="hljs-built_in">type</span> is delta<br>steps/align_si.sh: aligning data <span class="hljs-keyword">in</span> data/mfcc/train using model from exp/mono, putting alignments <span class="hljs-keyword">in</span> exp/mono_ali<br>tree-info exp/mono/tree<br>fstpushspecial<br>fstdeterminizestar --use-log=<span class="hljs-literal">true</span><br>fstminimizeencoded<br>fsttablecompose data/graph/lang/L_disambig.fst data/graph/lang/G.fst<br>steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/mono_ali<br>steps/diagnostic/analyze_alignments.sh: see stats <span class="hljs-keyword">in</span> exp/mono_ali/log/analyze_alignments.log<br>steps/align_si.sh: <span class="hljs-keyword">done</span> aligning data.<br>steps/train_deltas.sh --boost-silence 1.25 --cmd run.pl 2000 10000 data/mfcc/train data/lang exp/mono_ali exp/tri1<br>steps/train_deltas.sh: accumulating tree stats<br>steps/train_deltas.sh: getting questions <span class="hljs-keyword">for</span> tree-building, via clustering<br>steps/train_deltas.sh: building the tree<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 109 with no stats; corresponding phone list: 110<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 121 with no stats; corresponding phone list: 122<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 163 with no stats; corresponding phone list: 164<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 175 with no stats; corresponding phone list: 176<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 176 with no stats; corresponding phone list: 177<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 177 with no stats; corresponding phone list: 178<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 182 with no stats; corresponding phone list: 183<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 203 with no stats; corresponding phone list: 204<br>WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 208 with no stats; corresponding phone list: 209<br>** The warnings above about <span class="hljs-string">&#x27;no stats&#x27;</span> generally mean you have phones **<br>** (or <span class="hljs-built_in">groups</span> of phones) <span class="hljs-keyword">in</span> your phone <span class="hljs-built_in">set</span> that had no corresponding data. **<br>** You should probably figure out whether something went wrong, **<br>** or whether your data just doesn<span class="hljs-string">&#x27;t happen to have examples of those **</span><br><span class="hljs-string">** phones. **</span><br><span class="hljs-string">steps/train_deltas.sh: converting alignments from exp/mono_ali to use current tree</span><br><span class="hljs-string">steps/train_deltas.sh: compiling graphs of transcripts</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 1</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 2</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 3</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 4</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 5</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 6</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 7</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 8</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 9</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 10</span><br><span class="hljs-string">steps/train_deltas.sh: aligning data</span><br><span class="hljs-string">fstisstochastic data/graph/lang/tmp/LG.fst</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 11</span><br><span class="hljs-string">-0.0480882 -0.0488869</span><br><span class="hljs-string">[info]: LG not stochastic.</span><br><span class="hljs-string">fstcomposecontext --context-size=1 --central-position=0 --read-disambig-syms=data/graph/lang/phones/disambig.int --write-disambig-syms=data/graph/lang/tmp/disambig_ilabels_1_0.int data/graph/lang/tmp/ilabels_1_0.12502 data/graph/lang/tmp/LG.fst</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 12</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 13</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 14</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 15</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 16</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 17</span><br><span class="hljs-string">fstisstochastic data/graph/lang/tmp/CLG_1_0.fst</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 18</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 19</span><br><span class="hljs-string">-0.0480882 -0.0488869</span><br><span class="hljs-string">[info]: CLG not stochastic.</span><br><span class="hljs-string">make-h-transducer --disambig-syms-out=exp/mono/graph_word/disambig_tid.int --transition-scale=1.0 data/graph/lang/tmp/ilabels_1_0 exp/mono/tree exp/mono/final.mdl</span><br><span class="hljs-string">fstrmsymbols exp/mono/graph_word/disambig_tid.int</span><br><span class="hljs-string">fsttablecompose exp/mono/graph_word/Ha.fst data/graph/lang/tmp/CLG_1_0.fst</span><br><span class="hljs-string">fstrmepslocal</span><br><span class="hljs-string">fstminimizeencoded</span><br><span class="hljs-string">fstdeterminizestar --use-log=true</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 20</span><br><span class="hljs-string">steps/train_deltas.sh: aligning data</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 21</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 22</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 23</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 24</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 25</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 26</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 27</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 28</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 29</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 30</span><br><span class="hljs-string">steps/train_deltas.sh: aligning data</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 31</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 32</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 33</span><br><span class="hljs-string">steps/train_deltas.sh: training pass 34</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri1</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri1/log/analyze_alignments.log</span><br><span class="hljs-string">93 warnings in exp/tri1/log/align.*.*.log</span><br><span class="hljs-string">74 warnings in exp/tri1/log/acc.*.*.log</span><br><span class="hljs-string">9 warnings in exp/tri1/log/init_model.log</span><br><span class="hljs-string">1 warnings in exp/tri1/log/build_tree.log</span><br><span class="hljs-string">281 warnings in exp/tri1/log/update.*.log</span><br><span class="hljs-string">9 warnings in exp/tri1/log/questions.log</span><br><span class="hljs-string">1 warnings in exp/tri1/log/compile_questions.log</span><br><span class="hljs-string">exp/tri1: nj=8 align prob=-96.76 over 25.48h [retry=0.4%, fail=0.0%] states=1680 gauss=10026 tree-impr=4.80</span><br><span class="hljs-string">steps/train_deltas.sh: Done training system with delta+delta-delta features in exp/tri1</span><br><span class="hljs-string">steps/align_si.sh --nj 8 --cmd run.pl data/mfcc/train data/lang exp/tri1 exp/tri1_ali</span><br><span class="hljs-string">tree-info exp/tri1/tree</span><br><span class="hljs-string">tree-info exp/tri1/tree</span><br><span class="hljs-string">fstcomposecontext --context-size=3 --central-position=1 --read-disambig-syms=data/graph/lang/phones/disambig.int --write-disambig-syms=data/graph/lang/tmp/disambig_ilabels_3_1.int data/graph/lang/tmp/ilabels_3_1.19467 data/graph/lang/tmp/LG.fst</span><br><span class="hljs-string">steps/align_si.sh: feature type is delta</span><br><span class="hljs-string">steps/align_si.sh: aligning data in data/mfcc/train using model from exp/tri1, putting alignments in exp/tri1_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri1_ali</span><br><span class="hljs-string">fstisstochastic exp/mono/graph_word/HCLGa.fst</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri1_ali/log/analyze_alignments.log</span><br><span class="hljs-string">steps/align_si.sh: done aligning data.</span><br><span class="hljs-string">steps/train_lda_mllt.sh --cmd run.pl --splice-opts --left-context=3 --right-context=3 2500 15000 data/mfcc/train data/lang exp/tri1_ali exp/tri2b</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Accumulating LDA statistics.</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Accumulating tree stats</span><br><span class="hljs-string">0.644531 -0.0974261</span><br><span class="hljs-string">HCLGa is not stochastic</span><br><span class="hljs-string">add-self-loops --self-loop-scale=0.1 --reorder=true exp/mono/final.mdl exp/mono/graph_word/HCLGa.fst</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Getting questions for tree clustering.</span><br><span class="hljs-string">fstisstochastic data/graph/lang/tmp/CLG_3_1.fst</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Building the tree</span><br><span class="hljs-string">0 -0.0488869</span><br><span class="hljs-string">[info]: CLG not stochastic.</span><br><span class="hljs-string">make-h-transducer --disambig-syms-out=exp/tri1/graph_word/disambig_tid.int --transition-scale=1.0 data/graph/lang/tmp/ilabels_3_1 exp/tri1/tree exp/tri1/final.mdl</span><br><span class="hljs-string">fstrmsymbols exp/tri1/graph_word/disambig_tid.int</span><br><span class="hljs-string">fstrmepslocal</span><br><span class="hljs-string">fstminimizeencoded</span><br><span class="hljs-string">fstdeterminizestar --use-log=true</span><br><span class="hljs-string">fsttablecompose exp/tri1/graph_word/Ha.fst data/graph/lang/tmp/CLG_3_1.fst</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Initializing the model</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 109 with no stats; corresponding phone list: 110</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 121 with no stats; corresponding phone list: 122</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 163 with no stats; corresponding phone list: 164</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 175 with no stats; corresponding phone list: 176</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 176 with no stats; corresponding phone list: 177</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 177 with no stats; corresponding phone list: 178</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 203 with no stats; corresponding phone list: 204</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 208 with no stats; corresponding phone list: 209</span><br><span class="hljs-string">This is a bad warning.</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Converting alignments from exp/tri1_ali to use current tree</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Compiling graphs of transcripts</span><br><span class="hljs-string">Training pass 1</span><br><span class="hljs-string">Training pass 2</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 3</span><br><span class="hljs-string">Training pass 4</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 5</span><br><span class="hljs-string">Training pass 6</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 7</span><br><span class="hljs-string">Training pass 8</span><br><span class="hljs-string">Training pass 9</span><br><span class="hljs-string">Training pass 10</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">steps/decode.sh --cmd run.pl --nj 8 exp/mono/graph_word data/mfcc/test exp/mono/decode_test_word</span><br><span class="hljs-string">decode.sh: feature type is delta</span><br><span class="hljs-string">Training pass 11</span><br><span class="hljs-string">Training pass 12</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Estimating MLLT</span><br><span class="hljs-string">Training pass 13</span><br><span class="hljs-string">Training pass 14</span><br><span class="hljs-string">Training pass 15</span><br><span class="hljs-string">Training pass 16</span><br><span class="hljs-string">Training pass 17</span><br><span class="hljs-string">Training pass 18</span><br><span class="hljs-string">Training pass 19</span><br><span class="hljs-string">Training pass 20</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Training pass 21</span><br><span class="hljs-string">Training pass 22</span><br><span class="hljs-string">Training pass 23</span><br><span class="hljs-string">Training pass 24</span><br><span class="hljs-string">Training pass 25</span><br><span class="hljs-string">Training pass 26</span><br><span class="hljs-string">Training pass 27</span><br><span class="hljs-string">Training pass 28</span><br><span class="hljs-string">Training pass 29</span><br><span class="hljs-string">Training pass 30</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Training pass 31</span><br><span class="hljs-string">fstisstochastic exp/tri1/graph_word/HCLGa.fst</span><br><span class="hljs-string">Training pass 32</span><br><span class="hljs-string">Training pass 33</span><br><span class="hljs-string">Training pass 34</span><br><span class="hljs-string">0.644531 -0.128805</span><br><span class="hljs-string">HCLGa is not stochastic</span><br><span class="hljs-string">add-self-loops --self-loop-scale=0.1 --reorder=true exp/tri1/final.mdl exp/tri1/graph_word/HCLGa.fst</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri2b</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri2b/log/analyze_alignments.log</span><br><span class="hljs-string">102 warnings in exp/tri2b/log/acc.*.*.log</span><br><span class="hljs-string">9 warnings in exp/tri2b/log/init_model.log</span><br><span class="hljs-string">272 warnings in exp/tri2b/log/update.*.log</span><br><span class="hljs-string">1 warnings in exp/tri2b/log/compile_questions.log</span><br><span class="hljs-string">3 warnings in exp/tri2b/log/lda_acc.*.log</span><br><span class="hljs-string">147 warnings in exp/tri2b/log/align.*.*.log</span><br><span class="hljs-string">1 warnings in exp/tri2b/log/build_tree.log</span><br><span class="hljs-string">8 warnings in exp/tri2b/log/questions.log</span><br><span class="hljs-string">exp/tri2b: nj=8 align prob=-48.15 over 25.48h [retry=0.5%, fail=0.0%] states=2080 gauss=15034 tree-impr=4.34 lda-sum=23.95 mllt:impr,logdet=1.18,1.68</span><br><span class="hljs-string">steps/train_lda_mllt.sh: Done training system with LDA+MLLT features in exp/tri2b</span><br><span class="hljs-string">steps/align_si.sh --nj 8 --cmd run.pl --use-graphs true data/mfcc/train data/lang exp/tri2b exp/tri2b_ali</span><br><span class="hljs-string">tree-info exp/tri2b/tree</span><br><span class="hljs-string">tree-info exp/tri2b/tree</span><br><span class="hljs-string">make-h-transducer --disambig-syms-out=exp/tri2b/graph_word/disambig_tid.int --transition-scale=1.0 data/graph/lang/tmp/ilabels_3_1 exp/tri2b/tree exp/tri2b/final.mdl</span><br><span class="hljs-string">steps/align_si.sh: feature type is lda</span><br><span class="hljs-string">steps/align_si.sh: aligning data in data/mfcc/train using model from exp/tri2b, putting alignments in exp/tri2b_ali</span><br><span class="hljs-string">fstminimizeencoded</span><br><span class="hljs-string">fstrmsymbols exp/tri2b/graph_word/disambig_tid.int</span><br><span class="hljs-string">fsttablecompose exp/tri2b/graph_word/Ha.fst data/graph/lang/tmp/CLG_3_1.fst</span><br><span class="hljs-string">fstrmepslocal</span><br><span class="hljs-string">fstdeterminizestar --use-log=true</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri2b_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri2b_ali/log/analyze_alignments.log</span><br><span class="hljs-string">steps/align_si.sh: done aligning data.</span><br><span class="hljs-string">steps/train_sat.sh --cmd run.pl 2500 15000 data/mfcc/train data/lang exp/tri2b_ali exp/tri3b</span><br><span class="hljs-string">steps/train_sat.sh: feature type is lda</span><br><span class="hljs-string">steps/train_sat.sh: obtaining initial fMLLR transforms since not present in exp/tri2b_ali</span><br><span class="hljs-string">steps/train_sat.sh: Accumulating tree stats</span><br><span class="hljs-string">steps/train_sat.sh: Getting questions for tree clustering.</span><br><span class="hljs-string">steps/train_sat.sh: Building the tree</span><br><span class="hljs-string">steps/train_sat.sh: Initializing the model</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 109 with no stats; corresponding phone list: 110</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 121 with no stats; corresponding phone list: 122</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 163 with no stats; corresponding phone list: 164</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 175 with no stats; corresponding phone list: 176</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 176 with no stats; corresponding phone list: 177</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 177 with no stats; corresponding phone list: 178</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 203 with no stats; corresponding phone list: 204</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmm():gmm-init-model.cc:55) Tree has pdf-id 208 with no stats; corresponding phone list: 209</span><br><span class="hljs-string">This is a bad warning.</span><br><span class="hljs-string">steps/train_sat.sh: Converting alignments from exp/tri2b_ali to use current tree</span><br><span class="hljs-string">steps/train_sat.sh: Compiling graphs of transcripts</span><br><span class="hljs-string">Pass 1</span><br><span class="hljs-string">Pass 2</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 3</span><br><span class="hljs-string">Pass 4</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 5</span><br><span class="hljs-string">Pass 6</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 7</span><br><span class="hljs-string">Pass 8</span><br><span class="hljs-string">Pass 9</span><br><span class="hljs-string">Pass 10</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Pass 11</span><br><span class="hljs-string">Pass 12</span><br><span class="hljs-string">Estimating fMLLR transforms</span><br><span class="hljs-string">Pass 13</span><br><span class="hljs-string">Pass 14</span><br><span class="hljs-string">Pass 15</span><br><span class="hljs-string">Pass 16</span><br><span class="hljs-string">Pass 17</span><br><span class="hljs-string">Pass 18</span><br><span class="hljs-string">Pass 19</span><br><span class="hljs-string">Pass 20</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Pass 21</span><br><span class="hljs-string">Pass 22</span><br><span class="hljs-string">Pass 23</span><br><span class="hljs-string">Pass 24</span><br><span class="hljs-string">Pass 25</span><br><span class="hljs-string">Pass 26</span><br><span class="hljs-string">Pass 27</span><br><span class="hljs-string">Pass 28</span><br><span class="hljs-string">Pass 29</span><br><span class="hljs-string">Pass 30</span><br><span class="hljs-string">Aligning data</span><br><span class="hljs-string">Pass 31</span><br><span class="hljs-string">Pass 32</span><br><span class="hljs-string">Pass 33</span><br><span class="hljs-string">Pass 34</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri3b</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri3b/log/analyze_alignments.log</span><br><span class="hljs-string">8 warnings in exp/tri3b/log/est_alimdl.log</span><br><span class="hljs-string">17 warnings in exp/tri3b/log/fmllr.*.*.log</span><br><span class="hljs-string">273 warnings in exp/tri3b/log/update.*.log</span><br><span class="hljs-string">1 warnings in exp/tri3b/log/compile_questions.log</span><br><span class="hljs-string">9 warnings in exp/tri3b/log/init_model.log</span><br><span class="hljs-string">184 warnings in exp/tri3b/log/align.*.*.log</span><br><span class="hljs-string">8 warnings in exp/tri3b/log/questions.log</span><br><span class="hljs-string">137 warnings in exp/tri3b/log/acc.*.*.log</span><br><span class="hljs-string">1 warnings in exp/tri3b/log/build_tree.log</span><br><span class="hljs-string">steps/train_sat.sh: Likelihood evolution:</span><br><span class="hljs-string">-49.6847 -49.47 -49.3759 -49.1992 -48.6433 -48.0719 -47.7074 -47.4761 -47.3067 -46.8607 -46.6761 -46.4768 -46.3598 -46.2623 -46.1698 -46.0852 -46.0069 -45.9349 -45.8688 -45.714 -45.6215 -45.5655 -45.513 -45.4636 -45.4176 -45.372 -45.3275 -45.2854 -45.2456 -45.1544 -45.0968 -45.0729 -45.0593 -45.05</span><br><span class="hljs-string">exp/tri3b: nj=8 align prob=-47.86 over 25.48h [retry=0.6%, fail=0.0%] states=2096 gauss=15027 fmllr-impr=2.42 over 18.96h tree-impr=6.40</span><br><span class="hljs-string">steps/train_sat.sh: done training SAT system in exp/tri3b</span><br><span class="hljs-string">steps/align_fmllr.sh --nj 8 --cmd run.pl data/mfcc/train data/lang exp/tri3b exp/tri3b_ali</span><br><span class="hljs-string">tree-info exp/tri3b/tree</span><br><span class="hljs-string">tree-info exp/tri3b/tree</span><br><span class="hljs-string">make-h-transducer --disambig-syms-out=exp/tri3b/graph_word/disambig_tid.int --transition-scale=1.0 data/graph/lang/tmp/ilabels_3_1 exp/tri3b/tree exp/tri3b/final.mdl</span><br><span class="hljs-string">steps/align_fmllr.sh: feature type is lda</span><br><span class="hljs-string">steps/align_fmllr.sh: compiling training graphs</span><br><span class="hljs-string">fstrmepslocal</span><br><span class="hljs-string">fstrmsymbols exp/tri3b/graph_word/disambig_tid.int</span><br><span class="hljs-string">fsttablecompose exp/tri3b/graph_word/Ha.fst data/graph/lang/tmp/CLG_3_1.fst</span><br><span class="hljs-string">fstminimizeencoded</span><br><span class="hljs-string">fstdeterminizestar --use-log=true</span><br><span class="hljs-string">steps/align_fmllr.sh: aligning data in data/mfcc/train using exp/tri3b/final.alimdl and speaker-independent features.</span><br><span class="hljs-string">ERROR: FstHeader::Read: Bad FST header: -</span><br><span class="hljs-string">ERROR (fstdeterminizestar[5.5.1038~1-9af2c]:ReadFstKaldi():kaldi-fst-io.cc:35) Reading FST: error reading FST header from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7f8837bb21c3]</span><br><span class="hljs-string">fstdeterminizestar(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x55a41a5396fd]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldi(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)+0x1bc) [0x7f8837c1463f]</span><br><span class="hljs-string">fstdeterminizestar(main+0x2c1) [0x55a41a5374d9]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f88374b1083]</span><br><span class="hljs-string">fstdeterminizestar(_start+0x2e) [0x55a41a53714e]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorERROR: FstHeader::Read: Bad FST header: -</span><br><span class="hljs-string">ERROR (fstrmsymbols[5.5.1038~1-9af2c]:ReadFstKaldiGeneric():kaldi-fst-io.cc:59) Reading FST: error reading FST header from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7f16484451c3]</span><br><span class="hljs-string">fstrmsymbols(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x55794475d89b]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldiGeneric(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, bool)+0x1cd) [0x7f16484a68c0]</span><br><span class="hljs-string">fstrmsymbols(main+0x3c1) [0x55794475cc2a]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f1647eb6083]</span><br><span class="hljs-string">fstrmsymbols(_start+0x2e) [0x55794475c7ae]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorERROR: FstHeader::Read: Bad FST header: -</span><br><span class="hljs-string">ERROR (fstrmepslocal[5.5.1038~1-9af2c]:ReadFstKaldi():kaldi-fst-io.cc:35) Reading FST: error reading FST header from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7fcddd5301c3]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x7fcddd5939ab]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldi(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)+0x1bc) [0x7fcddd59263f]</span><br><span class="hljs-string">fstrmepslocal(main+0x1ff) [0x5608e3aebb68]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7fcddce52083]</span><br><span class="hljs-string">fstrmepslocal(_start+0x2e) [0x5608e3aeb8ae]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorERROR: FstHeader::Read: Bad FST header: -</span><br><span class="hljs-string">ERROR (fstminimizeencoded[5.5.1038~1-9af2c]:ReadFstKaldi():kaldi-fst-io.cc:35) Reading FST: error reading FST header from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7f263e3761c3]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x7f263e3d99ab]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldi(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)+0x1bc) [0x7f263e3d863f]</span><br><span class="hljs-string">fstminimizeencoded(main+0x137) [0x5610c27c2b20]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f263dde7083]</span><br><span class="hljs-string">fstminimizeencoded(_start+0x2e) [0x5610c27c292e]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorsteps/align_fmllr.sh: computing fMLLR transforms</span><br><span class="hljs-string">steps/align_fmllr.sh: doing final alignment.</span><br><span class="hljs-string">steps/align_fmllr.sh: done aligning data.</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh --cmd run.pl data/lang exp/tri3b_ali</span><br><span class="hljs-string">steps/diagnostic/analyze_alignments.sh: see stats in exp/tri3b_ali/log/analyze_alignments.log</span><br><span class="hljs-string">61 warnings in exp/tri3b_ali/log/align_pass2.*.log</span><br><span class="hljs-string">45 warnings in exp/tri3b_ali/log/align_pass1.*.log</span><br><span class="hljs-string">3 warnings in exp/tri3b_ali/log/fmllr.*.log</span><br><span class="hljs-string">steps/train_quick.sh --cmd run.pl 4200 40000 data/mfcc/train data/lang exp/tri3b_ali exp/tri4b</span><br><span class="hljs-string">steps/train_quick.sh: feature type is lda</span><br><span class="hljs-string">steps/train_quick.sh: using transforms from exp/tri3b_ali</span><br><span class="hljs-string">steps/train_quick.sh: accumulating tree stats</span><br><span class="hljs-string">steps/train_quick.sh: Getting questions for tree clustering.</span><br><span class="hljs-string">steps/train_quick.sh: Building the tree</span><br><span class="hljs-string">steps/train_quick.sh: Initializing the model</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 109 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 121 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 163 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 175 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 176 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 177 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 203 of new tree has no stats.</span><br><span class="hljs-string">WARNING (gmm-init-model[5.5.1038~1-9af2c]:InitAmGmmFromOld():gmm-init-model.cc:147) Leaf 208 of new tree has no stats.</span><br><span class="hljs-string">steps/train_quick.sh: This is a bad warning.</span><br><span class="hljs-string">steps/train_quick.sh: mixing up old model.</span><br><span class="hljs-string">steps/train_quick.sh: converting old alignments</span><br><span class="hljs-string">steps/train_quick.sh: compiling training graphs</span><br><span class="hljs-string">steps/train_quick.sh: pass 1</span><br><span class="hljs-string">steps/train_quick.sh: pass 2</span><br><span class="hljs-string">steps/train_quick.sh: pass 3</span><br><span class="hljs-string">steps/train_quick.sh: pass 4</span><br><span class="hljs-string">steps/train_quick.sh: pass 5</span><br><span class="hljs-string">steps/train_quick.sh: pass 6</span><br><span class="hljs-string">steps/train_quick.sh: pass 7</span><br><span class="hljs-string">steps/train_quick.sh: pass 8</span><br><span class="hljs-string">steps/train_quick.sh: pass 9</span><br><span class="hljs-string">steps/train_quick.sh: pass 10</span><br><span class="hljs-string">steps/train_quick.sh: aligning data</span><br><span class="hljs-string">steps/train_quick.sh: pass 11</span><br><span class="hljs-string">steps/train_quick.sh: pass 12</span><br><span class="hljs-string">steps/train_quick.sh: pass 13</span><br><span class="hljs-string">steps/train_quick.sh: pass 14</span><br><span class="hljs-string">steps/train_quick.sh: pass 15</span><br><span class="hljs-string">steps/train_quick.sh: aligning data</span><br><span class="hljs-string">steps/train_quick.sh: pass 16</span><br><span class="hljs-string">steps/train_quick.sh: pass 17</span><br><span class="hljs-string">steps/train_quick.sh: pass 18</span><br><span class="hljs-string">steps/train_quick.sh: pass 19</span><br><span class="hljs-string">steps/train_quick.sh: estimating alignment model</span><br><span class="hljs-string">ERROR: VectorFst::Read: Unexpected end of file: &lt;unspecified&gt;</span><br><span class="hljs-string">ERROR (fstdeterminizestar[5.5.1038~1-9af2c]:ReadFstKaldi():kaldi-fst-io.cc:40) Could not read fst from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7f81a0f251c3]</span><br><span class="hljs-string">fstdeterminizestar(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x5559a38006fd]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldi(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)+0x586) [0x7f81a0f87a09]</span><br><span class="hljs-string">fstdeterminizestar(main+0x2c1) [0x5559a37fe4d9]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f81a0824083]</span><br><span class="hljs-string">fstdeterminizestar(_start+0x2e) [0x5559a37fe14e]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorERROR: FstHeader::Read: Bad FST header: -</span><br><span class="hljs-string">ERROR (fstrmsymbols[5.5.1038~1-9af2c]:ReadFstKaldiGeneric():kaldi-fst-io.cc:59) Reading FST: error reading FST header from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7f4c0cae81c3]</span><br><span class="hljs-string">fstrmsymbols(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x561cab70389b]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldiGeneric(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, bool)+0x1cd) [0x7f4c0cb498c0]</span><br><span class="hljs-string">fstrmsymbols(main+0x3c1) [0x561cab702c2a]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f4c0c559083]</span><br><span class="hljs-string">fstrmsymbols(_start+0x2e) [0x561cab7027ae]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorERROR: FstHeader::Read: Bad FST header: -</span><br><span class="hljs-string">ERROR (fstrmepslocal[5.5.1038~1-9af2c]:ReadFstKaldi():kaldi-fst-io.cc:35) Reading FST: error reading FST header from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7f72dc7501c3]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x7f72dc7b39ab]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldi(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)+0x1bc) [0x7f72dc7b263f]</span><br><span class="hljs-string">fstrmepslocal(main+0x1ff) [0x564dabc95b68]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7f72dc072083]</span><br><span class="hljs-string">fstrmepslocal(_start+0x2e) [0x564dabc958ae]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorERROR: FstHeader::Read: Bad FST header: -</span><br><span class="hljs-string">ERROR (fstminimizeencoded[5.5.1038~1-9af2c]:ReadFstKaldi():kaldi-fst-io.cc:35) Reading FST: error reading FST header from standard input</span><br><span class="hljs-string"></span><br><span class="hljs-string">[ Stack-Trace: ]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-base.so(kaldi::MessageLogger::LogMessage() const+0x793) [0x7fe2408121c3]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(kaldi::MessageLogger::LogAndThrow::operator=(kaldi::MessageLogger const&amp;)+0x25) [0x7fe2408759ab]</span><br><span class="hljs-string">/mnt/c/Users/ABC/Desktop/kaldi/src/lib/libkaldi-fstext.so(fst::ReadFstKaldi(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)+0x1bc) [0x7fe24087463f]</span><br><span class="hljs-string">fstminimizeencoded(main+0x137) [0x556e137adb20]</span><br><span class="hljs-string">/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0x7fe240283083]</span><br><span class="hljs-string">fstminimizeencoded(_start+0x2e) [0x556e137ad92e]</span><br><span class="hljs-string"></span><br><span class="hljs-string">kaldi::KaldiFatalErrorrun.pl: 1 / 8 failed, log is in exp/tri4b/log/acc_alimdl.*.log</span><br></code></pre></td></tr></table></figure>

<h1 id="4-Some-Useful-Tools-in-Kalid"><a href="#4-Some-Useful-Tools-in-Kalid" class="headerlink" title="4. Some Useful Tools in Kalid"></a>4. Some Useful Tools in Kalid</h1><h2 id="4-1-utils-x2F-run-pl"><a href="#4-1-utils-x2F-run-pl" class="headerlink" title="4.1 utils&#x2F;run.pl"></a>4.1 utils&#x2F;run.pl</h2><p>This will help the Kaldi run the system in multiple processing units，which makes the kaldi tranning more fast. We will discuss the <code>nj</code> later, since we will know <code>num_jobs</code>.</p>
<p>There is a very important tips here is that:</p>
<p>the <code>nj</code> value should smaller than the corpus speaker’s number. If there are 20 speakers in your corpus, you cannot set that number higher than that. If not follow this rule, it will send the errors.</p>
<h2 id="4-2-split-data-sh"><a href="#4-2-split-data-sh" class="headerlink" title="4.2 split_data.sh"></a>4.2 split_data.sh</h2><p>It will cut the data directories. </p>
<h1 id="5-Some-Useful-Links"><a href="#5-Some-Useful-Links" class="headerlink" title="5. Some Useful Links"></a>5. Some Useful Links</h1><p><a target="_blank" rel="noopener" href="https://www.eleanorchodroff.com/tutorial/kaldi/training-acoustic-models.html">https://www.eleanorchodroff.com/tutorial/kaldi/training-acoustic-models.html</a></p>
<p><a target="_blank" rel="noopener" href="https://faculty.sbs.arizona.edu/hammond/ling578-sp20/">https://faculty.sbs.arizona.edu/hammond/ling578-sp20/</a></p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Kaldi for Dummies</div>
      <div>http://xiaos.site/2022/07/11/Kaldi-for-Dummies/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Xiao Zhang</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>July 11, 2022</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>Licensed under</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/07/12/Code-Quality/" title="Code Quality">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Code Quality</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/07/11/Shell-and-Vim-on-Speech-and-Language-Processing/" title="Shell and Vim on Speech and Language Processing">
                        <span class="hidden-mobile">Shell and Vim on Speech and Language Processing</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    

  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        Views: 
        <span id="busuanzi_value_site_pv"></span>
        
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        Visitors: 
        <span id="busuanzi_value_site_uv"></span>
        
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
